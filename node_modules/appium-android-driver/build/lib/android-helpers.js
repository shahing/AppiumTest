"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.helpers = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _path = _interopRequireDefault(require("path"));

var _teen_process = require("teen_process");

var _asyncbox = require("asyncbox");

var _logger = _interopRequireDefault(require("./logger"));

var _appiumSupport = require("appium-support");

var _ioAppium = require("io.appium.settings");

var _bootstrap = _interopRequireDefault(require("./bootstrap"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _appiumAdb = _interopRequireDefault(require("appium-adb"));

var _unlockHelpers = _interopRequireWildcard(require("./unlock-helpers"));

const PACKAGE_INSTALL_TIMEOUT = 90000;
const CHROME_BROWSER_PACKAGE_ACTIVITY = {
  chrome: {
    pkg: 'com.android.chrome',
    activity: 'com.google.android.apps.chrome.Main'
  },
  chromium: {
    pkg: 'org.chromium.chrome.shell',
    activity: '.ChromeShellActivity'
  },
  chromebeta: {
    pkg: 'com.chrome.beta',
    activity: 'com.google.android.apps.chrome.Main'
  },
  browser: {
    pkg: 'com.android.browser',
    activity: 'com.android.browser.BrowserActivity'
  },
  'chromium-browser': {
    pkg: 'org.chromium.chrome',
    activity: 'com.google.android.apps.chrome.Main'
  },
  'chromium-webview': {
    pkg: 'org.chromium.webview_shell',
    activity: 'org.chromium.webview_shell.WebViewBrowserActivity'
  },
  default: {
    pkg: 'com.android.chrome',
    activity: 'com.google.android.apps.chrome.Main'
  }
};
const SETTINGS_HELPER_PKG_ID = 'io.appium.settings';
const SETTINGS_HELPER_MAIN_ACTIVITY = '.Settings';
const SETTINGS_HELPER_UNLOCK_ACTIVITY = '.Unlock';
let helpers = {};
exports.helpers = helpers;

helpers.createBaseADB = async function (opts = {}) {
  const {
    javaVersion,
    adbPort,
    suppressKillServer,
    remoteAdbHost,
    clearDeviceLogsOnStart,
    adbExecTimeout,
    useKeystore,
    keystorePath,
    keystorePassword,
    keyAlias,
    keyPassword
  } = opts;
  return await _appiumAdb.default.createADB({
    javaVersion,
    adbPort,
    suppressKillServer,
    remoteAdbHost,
    clearDeviceLogsOnStart,
    adbExecTimeout,
    useKeystore,
    keystorePath,
    keystorePassword,
    keyAlias,
    keyPassword
  });
};

helpers.parseJavaVersion = function (stderr) {
  let lines = stderr.split("\n");

  for (let line of lines) {
    if (new RegExp(/(java|openjdk) version/).test(line)) {
      return line.split(" ")[2].replace(/"/g, '');
    }
  }

  return null;
};

helpers.getJavaVersion = async function (logVersion = true) {
  let {
    stderr
  } = await (0, _teen_process.exec)('java', ['-version']);
  let javaVer = helpers.parseJavaVersion(stderr);

  if (javaVer === null) {
    throw new Error("Could not get the Java version. Is Java installed?");
  }

  if (logVersion) {
    _logger.default.info(`Java version is: ${javaVer}`);
  }

  return javaVer;
};

helpers.prepareEmulator = async function (adb, opts) {
  let {
    avd,
    avdArgs,
    language,
    locale,
    avdLaunchTimeout,
    avdReadyTimeout
  } = opts;

  if (!avd) {
    throw new Error("Cannot launch AVD without AVD name");
  }

  let avdName = avd.replace('@', '');
  let runningAVD = await adb.getRunningAVD(avdName);

  if (runningAVD !== null) {
    if (avdArgs && avdArgs.toLowerCase().indexOf("-wipe-data") > -1) {
      _logger.default.debug(`Killing '${avdName}' because it needs to be wiped at start.`);

      await adb.killEmulator(avdName);
    } else {
      _logger.default.debug("Not launching AVD because it is already running.");

      return;
    }
  }

  avdArgs = this.prepareAVDArgs(opts, adb, avdArgs);
  await adb.launchAVD(avd, avdArgs, language, locale, avdLaunchTimeout, avdReadyTimeout);
};

helpers.prepareAVDArgs = function (opts, adb, avdArgs) {
  let args = avdArgs ? [avdArgs] : [];

  if (!_lodash.default.isUndefined(opts.networkSpeed)) {
    let networkSpeed = this.ensureNetworkSpeed(adb, opts.networkSpeed);
    args.push('-netspeed', networkSpeed);
  }

  if (opts.isHeadless) {
    args.push('-no-window');
  }

  return args.join(' ');
};

helpers.ensureNetworkSpeed = function (adb, networkSpeed) {
  if (_lodash.default.values(adb.NETWORK_SPEED).indexOf(networkSpeed) !== -1) {
    return networkSpeed;
  }

  _logger.default.warn(`Wrong network speed param ${networkSpeed}, using default: full. Supported values: ${_lodash.default.values(adb.NETWORK_SPEED)}`);

  return adb.NETWORK_SPEED.FULL;
};

helpers.ensureDeviceLocale = async function (adb, language, country, script = null) {
  if (!_lodash.default.isString(language) && !_lodash.default.isString(country)) {
    _logger.default.warn(`setDeviceLanguageCountry requires language or country.`);

    _logger.default.warn(`Got language: '${language}' and country: '${country}'`);

    return;
  }

  await adb.setDeviceLanguageCountry(language, country, script);

  if (!(await adb.ensureCurrentLocale(language, country, script))) {
    const message = script ? `language: ${language}, country: ${country} and script: ${script}` : `language: ${language} and country: ${country}`;
    throw new Error(`Failed to set ${message}`);
  }
};

helpers.getDeviceInfoFromCaps = async function (opts = {}) {
  const adb = await helpers.createBaseADB(opts);
  let udid = opts.udid;
  let emPort = null;

  if (opts.avd) {
    await helpers.prepareEmulator(adb, opts);
    udid = adb.curDeviceId;
    emPort = adb.emulatorPort;
  } else {
    _logger.default.info("Retrieving device list");

    let devices = await adb.getDevicesWithRetry();

    if (udid) {
      if (!_lodash.default.includes(_lodash.default.map(devices, 'udid'), udid)) {
        _logger.default.errorAndThrow(`Device ${udid} was not in the list of connected devices`);
      }

      emPort = adb.getPortFromEmulatorString(udid);
    } else if (opts.platformVersion) {
      opts.platformVersion = `${opts.platformVersion}`.trim();

      _logger.default.info(`Looking for a device with Android '${opts.platformVersion}'`);

      let availDevicesStr = [];

      for (let device of devices) {
        await adb.setDeviceId(device.udid);
        let deviceOS = await adb.getPlatformVersion();
        availDevicesStr.push(`${device.udid} (${deviceOS})`);

        if (deviceOS.indexOf(opts.platformVersion) === 0) {
          udid = device.udid;
          break;
        }
      }

      if (!udid) {
        _logger.default.errorAndThrow(`Unable to find an active device or emulator ` + `with OS ${opts.platformVersion}. The following are available: ` + availDevicesStr.join(', '));
      }

      emPort = adb.getPortFromEmulatorString(udid);
    } else {
      udid = devices[0].udid;
      emPort = adb.getPortFromEmulatorString(udid);
    }
  }

  _logger.default.info(`Using device: ${udid}`);

  return {
    udid,
    emPort
  };
};

helpers.createADB = async function (opts = {}) {
  const {
    udid,
    emPort
  } = opts;
  const adb = await helpers.createBaseADB(opts);
  adb.setDeviceId(udid);

  if (emPort) {
    adb.setEmulatorPort(emPort);
  }

  return adb;
};

helpers.validatePackageActivityNames = function (opts) {
  for (const key of ['appPackage', 'appActivity', 'appWaitPackage', 'appWaitActivity']) {
    const name = opts[key];

    if (!name) {
      continue;
    }

    const match = /([^\w.*,])+/.exec(name);

    if (!match) {
      continue;
    }

    _logger.default.warn(`Capability '${key}' is expected to only include latin letters, digits, underscore, dot, comma and asterisk characters.`);

    _logger.default.warn(`Current value '${name}' has non-matching character at index ${match.index}: '${name.substring(0, match.index + 1)}'`);
  }
};

helpers.getLaunchInfo = async function (adb, opts) {
  let {
    app,
    appPackage,
    appActivity,
    appWaitPackage,
    appWaitActivity
  } = opts;

  if (!app) {
    _logger.default.warn("No app sent in, not parsing package/activity");

    return;
  }

  this.validatePackageActivityNames(opts);

  if (appPackage && appActivity) {
    return;
  }

  _logger.default.debug("Parsing package and activity from app manifest");

  let {
    apkPackage,
    apkActivity
  } = await adb.packageAndLaunchActivityFromManifest(app);

  if (apkPackage && !appPackage) {
    appPackage = apkPackage;
  }

  if (!appWaitPackage) {
    appWaitPackage = appPackage;
  }

  if (apkActivity && !appActivity) {
    appActivity = apkActivity;
  }

  if (!appWaitActivity) {
    appWaitActivity = appActivity;
  }

  _logger.default.debug(`Parsed package and activity are: ${apkPackage}/${apkActivity}`);

  return {
    appPackage,
    appWaitPackage,
    appActivity,
    appWaitActivity
  };
};

helpers.resetApp = async function (adb, opts = {}) {
  const {
    app,
    appPackage,
    fastReset,
    fullReset,
    androidInstallTimeout = PACKAGE_INSTALL_TIMEOUT,
    autoGrantPermissions,
    allowTestPackages
  } = opts;

  if (!appPackage) {
    throw new Error("'appPackage' option is required");
  }

  const isInstalled = await adb.isAppInstalled(appPackage);

  if (isInstalled) {
    try {
      await adb.forceStop(appPackage);
    } catch (ign) {}

    if (!fullReset && fastReset) {
      const output = await adb.clear(appPackage);

      if (_lodash.default.isString(output) && output.toLowerCase().includes('failed')) {
        throw new Error(`Cannot clear the application data of '${appPackage}'. Original error: ${output}`);
      }

      if (autoGrantPermissions) {
        try {
          await adb.grantAllPermissions(appPackage);
        } catch (error) {
          _logger.default.error(`Unable to grant permissions requested. Original error: ${error.message}`);
        }
      }

      _logger.default.debug(`Performed fast reset on the installed '${appPackage}' application (stop and clear)`);

      return;
    }
  }

  if (!app) {
    throw new Error("'app' option is required for reinstall");
  }

  _logger.default.debug(`Running full reset on '${appPackage}' (reinstall)`);

  if (isInstalled) {
    await adb.uninstallApk(appPackage);
  }

  await adb.install(app, {
    grantPermissions: autoGrantPermissions,
    timeout: androidInstallTimeout,
    allowTestPackages
  });
};

helpers.installApk = async function (adb, opts = {}) {
  const {
    app,
    appPackage,
    fastReset,
    fullReset,
    androidInstallTimeout = PACKAGE_INSTALL_TIMEOUT,
    autoGrantPermissions,
    allowTestPackages
  } = opts;

  if (!app || !appPackage) {
    throw new Error("'app' and 'appPackage' options are required");
  }

  if (fullReset) {
    await this.resetApp(adb, opts);
    return;
  }

  const shouldPerformFastReset = fastReset && (await adb.isAppInstalled(appPackage));
  await adb.installOrUpgrade(app, appPackage, {
    grantPermissions: autoGrantPermissions,
    timeout: androidInstallTimeout,
    allowTestPackages
  });

  if (shouldPerformFastReset) {
    _logger.default.info(`Performing fast reset on '${appPackage}'`);

    await this.resetApp(adb, opts);
  }
};

helpers.installOtherApks = async function (otherApps, adb, opts) {
  let {
    androidInstallTimeout = PACKAGE_INSTALL_TIMEOUT,
    autoGrantPermissions,
    allowTestPackages
  } = opts;
  await _bluebird.default.all(otherApps.map(otherApp => {
    _logger.default.debug(`Installing app: ${otherApp}`);

    return adb.installOrUpgrade(otherApp, null, {
      grantPermissions: autoGrantPermissions,
      timeout: androidInstallTimeout,
      allowTestPackages
    });
  }));
};

helpers.initUnicodeKeyboard = async function (adb) {
  _logger.default.debug('Enabling Unicode keyboard support');

  let defaultIME = await adb.defaultIME();

  _logger.default.debug(`Unsetting previous IME ${defaultIME}`);

  const appiumIME = `${SETTINGS_HELPER_PKG_ID}/.UnicodeIME`;

  _logger.default.debug(`Setting IME to '${appiumIME}'`);

  await adb.enableIME(appiumIME);
  await adb.setIME(appiumIME);
  return defaultIME;
};

helpers.setMockLocationApp = async function (adb, app) {
  try {
    if ((await adb.getApiLevel()) < 23) {
      await adb.shell(['settings', 'put', 'secure', 'mock_location', '1']);
    } else {
      await adb.shell(['appops', 'set', app, 'android:mock_location', 'allow']);
    }
  } catch (err) {
    _logger.default.warn(`Unable to set mock location for app '${app}': ${err.message}`);
  }
};

helpers.installHelperApp = async function (adb, apkPath, packageId, appName) {
  try {
    await adb.installOrUpgrade(apkPath, packageId, {
      grantPermissions: true
    });
  } catch (err) {
    _logger.default.warn(`Ignored error while installing Appium ${appName} helper: ` + `'${err.message}'. Manually uninstalling the application ` + `with package id '${packageId}' may help. Expect some Appium ` + `features may not work as expected unless this problem is ` + `fixed.`);
  }
};

helpers.pushSettingsApp = async function (adb, throwError = false) {
  _logger.default.debug("Pushing settings apk to device...");

  await helpers.installHelperApp(adb, _ioAppium.path, SETTINGS_HELPER_PKG_ID, 'Settings');

  if (await adb.processExists(SETTINGS_HELPER_PKG_ID)) {
    _logger.default.debug(`${SETTINGS_HELPER_PKG_ID} is already running. ` + `There is no need to reset its permissions.`);

    return;
  }

  if ((await adb.getApiLevel()) <= 23) {
    _logger.default.info('Granting android.permission.SET_ANIMATION_SCALE, CHANGE_CONFIGURATION, ACCESS_FINE_LOCATION by pm grant');

    await adb.grantPermissions(SETTINGS_HELPER_PKG_ID, ['android.permission.SET_ANIMATION_SCALE', 'android.permission.CHANGE_CONFIGURATION', 'android.permission.ACCESS_FINE_LOCATION']);
  }

  try {
    await adb.startApp({
      pkg: SETTINGS_HELPER_PKG_ID,
      activity: SETTINGS_HELPER_MAIN_ACTIVITY,
      action: "android.intent.action.MAIN",
      category: "android.intent.category.LAUNCHER",
      flags: "0x10200000",
      stopApp: false
    });
  } catch (err) {
    _logger.default.warn(`Failed to launch settings app: ${err.message}`);

    if (throwError) {
      throw err;
    }
  }
};

helpers.pushStrings = async function (language, adb, opts) {
  const remoteDir = '/data/local/tmp';
  const stringsJson = 'strings.json';

  const remoteFile = _path.default.posix.resolve(remoteDir, stringsJson);

  await adb.rimraf(remoteFile);
  let app;

  try {
    app = opts.app || (await adb.pullApk(opts.appPackage, opts.tmpDir));
  } catch (err) {
    _logger.default.info(`Failed to pull an apk from '${opts.appPackage}' to '${opts.tmpDir}'. Original error: ${err.message}`);
  }

  if (_lodash.default.isEmpty(opts.appPackage) || !(await _appiumSupport.fs.exists(app))) {
    _logger.default.debug(`No app or package specified. Returning empty strings`);

    return {};
  }

  const stringsTmpDir = _path.default.resolve(opts.tmpDir, opts.appPackage);

  try {
    _logger.default.debug('Extracting strings from apk', app, language, stringsTmpDir);

    const {
      apkStrings,
      localPath
    } = await adb.extractStringsFromApk(app, language, stringsTmpDir);
    await adb.push(localPath, remoteDir);
    return apkStrings;
  } catch (err) {
    _logger.default.warn(`Could not get strings, continuing anyway. Original error: ${err.message}`);

    await adb.shell('echo', [`'{}' > ${remoteFile}`]);
  } finally {
    await _appiumSupport.fs.rimraf(stringsTmpDir);
  }

  return {};
};

helpers.unlockWithUIAutomation = async function (driver, adb, unlockCapabilities) {
  let unlockType = unlockCapabilities.unlockType;

  if (!_unlockHelpers.default.isValidUnlockType(unlockType)) {
    throw new Error(`Invalid unlock type ${unlockType}`);
  }

  let unlockKey = unlockCapabilities.unlockKey;

  if (!_unlockHelpers.default.isValidKey(unlockType, unlockKey)) {
    throw new Error(`Missing unlockKey ${unlockKey} capability for unlockType ${unlockType}`);
  }

  const unlockMethod = {
    [_unlockHelpers.PIN_UNLOCK]: _unlockHelpers.default.pinUnlock,
    [_unlockHelpers.PASSWORD_UNLOCK]: _unlockHelpers.default.passwordUnlock,
    [_unlockHelpers.PATTERN_UNLOCK]: _unlockHelpers.default.patternUnlock,
    [_unlockHelpers.FINGERPRINT_UNLOCK]: _unlockHelpers.default.fingerprintUnlock
  }[unlockType];
  await unlockMethod(adb, driver, unlockCapabilities);
};

helpers.unlockWithHelperApp = async function (adb) {
  _logger.default.info("Unlocking screen");

  let firstRun = true;
  await (0, _asyncbox.retry)(3, async function () {
    if (firstRun) {
      firstRun = false;
    } else {
      try {
        if (!(await adb.isScreenLocked())) {
          return;
        }
      } catch (e) {
        _logger.default.warn(`Error in isScreenLocked: ${e.message}`);

        _logger.default.warn("\"adb shell dumpsys window\" command has timed out.");

        _logger.default.warn("The reason of this timeout is the delayed adb response. Resetting adb server can improve it.");
      }
    }

    _logger.default.info(`Launching ${SETTINGS_HELPER_UNLOCK_ACTIVITY}`);

    await adb.shell(['am', 'start', '-n', `${SETTINGS_HELPER_PKG_ID}/${SETTINGS_HELPER_UNLOCK_ACTIVITY}`, '-c', 'android.intent.category.LAUNCHER', '-a', 'android.intent.action.MAIN', '-f', '0x10200000']);
    await _bluebird.default.delay(1000);
  });
};

helpers.unlock = async function (driver, adb, capabilities) {
  if (!(await adb.isScreenLocked())) {
    _logger.default.info("Screen already unlocked, doing nothing");

    return;
  }

  _logger.default.debug("Screen is locked, trying to unlock");

  if (_lodash.default.isUndefined(capabilities.unlockType)) {
    _logger.default.warn("Using app unlock, this is going to be deprecated!");

    await helpers.unlockWithHelperApp(adb);
  } else {
    await helpers.unlockWithUIAutomation(driver, adb, {
      unlockType: capabilities.unlockType,
      unlockKey: capabilities.unlockKey
    });
    await helpers.verifyUnlock(adb);
  }
};

helpers.verifyUnlock = async function (adb) {
  await (0, _asyncbox.retryInterval)(2, 1000, async () => {
    if (await adb.isScreenLocked()) {
      throw new Error("Screen did not unlock successfully, retrying");
    }

    _logger.default.debug("Screen unlocked successfully");
  });
};

helpers.initDevice = async function (adb, opts) {
  if (opts.skipDeviceInitialization) {
    _logger.default.info(`'skipDeviceInitialization' is set. Skipping device initialization.`);
  } else {
    await adb.waitForDevice();
    await helpers.pushSettingsApp(adb);
  }

  if (!opts.avd) {
    await helpers.setMockLocationApp(adb, SETTINGS_HELPER_PKG_ID);
  }

  if (opts.language || opts.locale) {
    await helpers.ensureDeviceLocale(adb, opts.language, opts.locale, opts.localeScript);
  }

  await adb.startLogcat();

  if (opts.unicodeKeyboard) {
    return await helpers.initUnicodeKeyboard(adb);
  }
};

helpers.removeNullProperties = function (obj) {
  for (let key of _lodash.default.keys(obj)) {
    if (_lodash.default.isNull(obj[key]) || _lodash.default.isUndefined(obj[key])) {
      delete obj[key];
    }
  }
};

helpers.truncateDecimals = function (number, digits) {
  let multiplier = Math.pow(10, digits),
      adjustedNum = number * multiplier,
      truncatedNum = Math[adjustedNum < 0 ? 'ceil' : 'floor'](adjustedNum);
  return truncatedNum / multiplier;
};

helpers.isChromeBrowser = function (browser) {
  return _lodash.default.includes(Object.keys(CHROME_BROWSER_PACKAGE_ACTIVITY), (browser || '').toLowerCase());
};

helpers.getChromePkg = function (browser) {
  return CHROME_BROWSER_PACKAGE_ACTIVITY[browser.toLowerCase()] || CHROME_BROWSER_PACKAGE_ACTIVITY.default;
};

helpers.removeAllSessionWebSocketHandlers = async function (server, sessionId) {
  if (!server || !_lodash.default.isFunction(server.getWebSocketHandlers)) {
    return;
  }

  const activeHandlers = await server.getWebSocketHandlers(sessionId);

  for (const pathname of _lodash.default.keys(activeHandlers)) {
    await server.removeWebSocketHandler(pathname);
  }
};

helpers.parseArray = function (cap) {
  let parsedCaps;

  try {
    parsedCaps = JSON.parse(cap);
  } catch (ign) {}

  if (_lodash.default.isArray(parsedCaps)) {
    return parsedCaps;
  } else if (_lodash.default.isString(cap)) {
    return [cap];
  }

  throw new Error(`must provide a string or JSON Array; received ${cap}`);
};

helpers.validateDesiredCaps = function (caps) {
  if ((!caps.browserName || !this.isChromeBrowser(caps.browserName)) && !caps.app && !caps.appPackage) {
    _logger.default.errorAndThrow('The desired capabilities must include either an app, appPackage or browserName');
  }

  if (caps.browserName) {
    if (caps.app) {
      _logger.default.warn(`The desired capabilities should generally not include both an 'app' and a 'browserName'`);
    }

    if (caps.appPackage) {
      _logger.default.errorAndThrow(`The desired should not include both of an 'appPackage' and a 'browserName'`);
    }
  }

  return true;
};

helpers.bootstrap = _bootstrap.default;
helpers.unlocker = _unlockHelpers.default;
var _default = helpers;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9hbmRyb2lkLWhlbHBlcnMuanMiXSwibmFtZXMiOlsiUEFDS0FHRV9JTlNUQUxMX1RJTUVPVVQiLCJDSFJPTUVfQlJPV1NFUl9QQUNLQUdFX0FDVElWSVRZIiwiY2hyb21lIiwicGtnIiwiYWN0aXZpdHkiLCJjaHJvbWl1bSIsImNocm9tZWJldGEiLCJicm93c2VyIiwiZGVmYXVsdCIsIlNFVFRJTkdTX0hFTFBFUl9QS0dfSUQiLCJTRVRUSU5HU19IRUxQRVJfTUFJTl9BQ1RJVklUWSIsIlNFVFRJTkdTX0hFTFBFUl9VTkxPQ0tfQUNUSVZJVFkiLCJoZWxwZXJzIiwiY3JlYXRlQmFzZUFEQiIsIm9wdHMiLCJqYXZhVmVyc2lvbiIsImFkYlBvcnQiLCJzdXBwcmVzc0tpbGxTZXJ2ZXIiLCJyZW1vdGVBZGJIb3N0IiwiY2xlYXJEZXZpY2VMb2dzT25TdGFydCIsImFkYkV4ZWNUaW1lb3V0IiwidXNlS2V5c3RvcmUiLCJrZXlzdG9yZVBhdGgiLCJrZXlzdG9yZVBhc3N3b3JkIiwia2V5QWxpYXMiLCJrZXlQYXNzd29yZCIsIkFEQiIsImNyZWF0ZUFEQiIsInBhcnNlSmF2YVZlcnNpb24iLCJzdGRlcnIiLCJsaW5lcyIsInNwbGl0IiwibGluZSIsIlJlZ0V4cCIsInRlc3QiLCJyZXBsYWNlIiwiZ2V0SmF2YVZlcnNpb24iLCJsb2dWZXJzaW9uIiwiamF2YVZlciIsIkVycm9yIiwibG9nZ2VyIiwiaW5mbyIsInByZXBhcmVFbXVsYXRvciIsImFkYiIsImF2ZCIsImF2ZEFyZ3MiLCJsYW5ndWFnZSIsImxvY2FsZSIsImF2ZExhdW5jaFRpbWVvdXQiLCJhdmRSZWFkeVRpbWVvdXQiLCJhdmROYW1lIiwicnVubmluZ0FWRCIsImdldFJ1bm5pbmdBVkQiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJkZWJ1ZyIsImtpbGxFbXVsYXRvciIsInByZXBhcmVBVkRBcmdzIiwibGF1bmNoQVZEIiwiYXJncyIsIl8iLCJpc1VuZGVmaW5lZCIsIm5ldHdvcmtTcGVlZCIsImVuc3VyZU5ldHdvcmtTcGVlZCIsInB1c2giLCJpc0hlYWRsZXNzIiwiam9pbiIsInZhbHVlcyIsIk5FVFdPUktfU1BFRUQiLCJ3YXJuIiwiRlVMTCIsImVuc3VyZURldmljZUxvY2FsZSIsImNvdW50cnkiLCJzY3JpcHQiLCJpc1N0cmluZyIsInNldERldmljZUxhbmd1YWdlQ291bnRyeSIsImVuc3VyZUN1cnJlbnRMb2NhbGUiLCJtZXNzYWdlIiwiZ2V0RGV2aWNlSW5mb0Zyb21DYXBzIiwidWRpZCIsImVtUG9ydCIsImN1ckRldmljZUlkIiwiZW11bGF0b3JQb3J0IiwiZGV2aWNlcyIsImdldERldmljZXNXaXRoUmV0cnkiLCJpbmNsdWRlcyIsIm1hcCIsImVycm9yQW5kVGhyb3ciLCJnZXRQb3J0RnJvbUVtdWxhdG9yU3RyaW5nIiwicGxhdGZvcm1WZXJzaW9uIiwidHJpbSIsImF2YWlsRGV2aWNlc1N0ciIsImRldmljZSIsInNldERldmljZUlkIiwiZGV2aWNlT1MiLCJnZXRQbGF0Zm9ybVZlcnNpb24iLCJzZXRFbXVsYXRvclBvcnQiLCJ2YWxpZGF0ZVBhY2thZ2VBY3Rpdml0eU5hbWVzIiwia2V5IiwibmFtZSIsIm1hdGNoIiwiZXhlYyIsImluZGV4Iiwic3Vic3RyaW5nIiwiZ2V0TGF1bmNoSW5mbyIsImFwcCIsImFwcFBhY2thZ2UiLCJhcHBBY3Rpdml0eSIsImFwcFdhaXRQYWNrYWdlIiwiYXBwV2FpdEFjdGl2aXR5IiwiYXBrUGFja2FnZSIsImFwa0FjdGl2aXR5IiwicGFja2FnZUFuZExhdW5jaEFjdGl2aXR5RnJvbU1hbmlmZXN0IiwicmVzZXRBcHAiLCJmYXN0UmVzZXQiLCJmdWxsUmVzZXQiLCJhbmRyb2lkSW5zdGFsbFRpbWVvdXQiLCJhdXRvR3JhbnRQZXJtaXNzaW9ucyIsImFsbG93VGVzdFBhY2thZ2VzIiwiaXNJbnN0YWxsZWQiLCJpc0FwcEluc3RhbGxlZCIsImZvcmNlU3RvcCIsImlnbiIsIm91dHB1dCIsImNsZWFyIiwiZ3JhbnRBbGxQZXJtaXNzaW9ucyIsImVycm9yIiwidW5pbnN0YWxsQXBrIiwiaW5zdGFsbCIsImdyYW50UGVybWlzc2lvbnMiLCJ0aW1lb3V0IiwiaW5zdGFsbEFwayIsInNob3VsZFBlcmZvcm1GYXN0UmVzZXQiLCJpbnN0YWxsT3JVcGdyYWRlIiwiaW5zdGFsbE90aGVyQXBrcyIsIm90aGVyQXBwcyIsIkIiLCJhbGwiLCJvdGhlckFwcCIsImluaXRVbmljb2RlS2V5Ym9hcmQiLCJkZWZhdWx0SU1FIiwiYXBwaXVtSU1FIiwiZW5hYmxlSU1FIiwic2V0SU1FIiwic2V0TW9ja0xvY2F0aW9uQXBwIiwiZ2V0QXBpTGV2ZWwiLCJzaGVsbCIsImVyciIsImluc3RhbGxIZWxwZXJBcHAiLCJhcGtQYXRoIiwicGFja2FnZUlkIiwiYXBwTmFtZSIsInB1c2hTZXR0aW5nc0FwcCIsInRocm93RXJyb3IiLCJzZXR0aW5nc0Fwa1BhdGgiLCJwcm9jZXNzRXhpc3RzIiwic3RhcnRBcHAiLCJhY3Rpb24iLCJjYXRlZ29yeSIsImZsYWdzIiwic3RvcEFwcCIsInB1c2hTdHJpbmdzIiwicmVtb3RlRGlyIiwic3RyaW5nc0pzb24iLCJyZW1vdGVGaWxlIiwicGF0aCIsInBvc2l4IiwicmVzb2x2ZSIsInJpbXJhZiIsInB1bGxBcGsiLCJ0bXBEaXIiLCJpc0VtcHR5IiwiZnMiLCJleGlzdHMiLCJzdHJpbmdzVG1wRGlyIiwiYXBrU3RyaW5ncyIsImxvY2FsUGF0aCIsImV4dHJhY3RTdHJpbmdzRnJvbUFwayIsInVubG9ja1dpdGhVSUF1dG9tYXRpb24iLCJkcml2ZXIiLCJ1bmxvY2tDYXBhYmlsaXRpZXMiLCJ1bmxvY2tUeXBlIiwidW5sb2NrZXIiLCJpc1ZhbGlkVW5sb2NrVHlwZSIsInVubG9ja0tleSIsImlzVmFsaWRLZXkiLCJ1bmxvY2tNZXRob2QiLCJQSU5fVU5MT0NLIiwicGluVW5sb2NrIiwiUEFTU1dPUkRfVU5MT0NLIiwicGFzc3dvcmRVbmxvY2siLCJQQVRURVJOX1VOTE9DSyIsInBhdHRlcm5VbmxvY2siLCJGSU5HRVJQUklOVF9VTkxPQ0siLCJmaW5nZXJwcmludFVubG9jayIsInVubG9ja1dpdGhIZWxwZXJBcHAiLCJmaXJzdFJ1biIsImlzU2NyZWVuTG9ja2VkIiwiZSIsImRlbGF5IiwidW5sb2NrIiwiY2FwYWJpbGl0aWVzIiwidmVyaWZ5VW5sb2NrIiwiaW5pdERldmljZSIsInNraXBEZXZpY2VJbml0aWFsaXphdGlvbiIsIndhaXRGb3JEZXZpY2UiLCJsb2NhbGVTY3JpcHQiLCJzdGFydExvZ2NhdCIsInVuaWNvZGVLZXlib2FyZCIsInJlbW92ZU51bGxQcm9wZXJ0aWVzIiwib2JqIiwia2V5cyIsImlzTnVsbCIsInRydW5jYXRlRGVjaW1hbHMiLCJudW1iZXIiLCJkaWdpdHMiLCJtdWx0aXBsaWVyIiwiTWF0aCIsInBvdyIsImFkanVzdGVkTnVtIiwidHJ1bmNhdGVkTnVtIiwiaXNDaHJvbWVCcm93c2VyIiwiT2JqZWN0IiwiZ2V0Q2hyb21lUGtnIiwicmVtb3ZlQWxsU2Vzc2lvbldlYlNvY2tldEhhbmRsZXJzIiwic2VydmVyIiwic2Vzc2lvbklkIiwiaXNGdW5jdGlvbiIsImdldFdlYlNvY2tldEhhbmRsZXJzIiwiYWN0aXZlSGFuZGxlcnMiLCJwYXRobmFtZSIsInJlbW92ZVdlYlNvY2tldEhhbmRsZXIiLCJwYXJzZUFycmF5IiwiY2FwIiwicGFyc2VkQ2FwcyIsIkpTT04iLCJwYXJzZSIsImlzQXJyYXkiLCJ2YWxpZGF0ZURlc2lyZWRDYXBzIiwiY2FwcyIsImJyb3dzZXJOYW1lIiwiYm9vdHN0cmFwIiwiQm9vdHN0cmFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBSUEsTUFBTUEsdUJBQXVCLEdBQUcsS0FBaEM7QUFDQSxNQUFNQywrQkFBK0IsR0FBRztBQUN0Q0MsRUFBQUEsTUFBTSxFQUFFO0FBQ05DLElBQUFBLEdBQUcsRUFBRSxvQkFEQztBQUVOQyxJQUFBQSxRQUFRLEVBQUU7QUFGSixHQUQ4QjtBQUt0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cG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgeyByZXRyeSwgcmV0cnlJbnRlcnZhbCB9IGZyb20gJ2FzeW5jYm94JztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgZnMgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgeyBwYXRoIGFzIHNldHRpbmdzQXBrUGF0aCB9IGZyb20gJ2lvLmFwcGl1bS5zZXR0aW5ncyc7XG5pbXBvcnQgQm9vdHN0cmFwIGZyb20gJy4vYm9vdHN0cmFwJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBBREIgZnJvbSAnYXBwaXVtLWFkYic7XG5pbXBvcnQgeyBkZWZhdWx0IGFzIHVubG9ja2VyLCBQSU5fVU5MT0NLLCBQQVNTV09SRF9VTkxPQ0ssXG4gICAgICAgICBQQVRURVJOX1VOTE9DSywgRklOR0VSUFJJTlRfVU5MT0NLIH0gZnJvbSAnLi91bmxvY2staGVscGVycyc7XG5cblxuY29uc3QgUEFDS0FHRV9JTlNUQUxMX1RJTUVPVVQgPSA5MDAwMDsgLy8gbWlsbGlzZWNvbmRzXG5jb25zdCBDSFJPTUVfQlJPV1NFUl9QQUNLQUdFX0FDVElWSVRZID0ge1xuICBjaHJvbWU6IHtcbiAgICBwa2c6ICdjb20uYW5kcm9pZC5jaHJvbWUnLFxuICAgIGFjdGl2aXR5OiAnY29tLmdvb2dsZS5hbmRyb2lkLmFwcHMuY2hyb21lLk1haW4nLFxuICB9LFxuICBjaHJvbWl1bToge1xuICAgIHBrZzogJ29yZy5jaHJvbWl1bS5jaHJvbWUuc2hlbGwnLFxuICAgIGFjdGl2aXR5OiAnLkNocm9tZVNoZWxsQWN0aXZpdHknLFxuICB9LFxuICBjaHJvbWViZXRhOiB7XG4gICAgcGtnOiAnY29tLmNocm9tZS5iZXRhJyxcbiAgICBhY3Rpdml0eTogJ2NvbS5nb29nbGUuYW5kcm9pZC5hcHBzLmNocm9tZS5NYWluJyxcbiAgfSxcbiAgYnJvd3Nlcjoge1xuICAgIHBrZzogJ2NvbS5hbmRyb2lkLmJyb3dzZXInLFxuICAgIGFjdGl2aXR5OiAnY29tLmFuZHJvaWQuYnJvd3Nlci5Ccm93c2VyQWN0aXZpdHknLFxuICB9LFxuICAnY2hyb21pdW0tYnJvd3Nlcic6IHtcbiAgICBwa2c6ICdvcmcuY2hyb21pdW0uY2hyb21lJyxcbiAgICBhY3Rpdml0eTogJ2NvbS5nb29nbGUuYW5kcm9pZC5hcHBzLmNocm9tZS5NYWluJyxcbiAgfSxcbiAgJ2Nocm9taXVtLXdlYnZpZXcnOiB7XG4gICAgcGtnOiAnb3JnLmNocm9taXVtLndlYnZpZXdfc2hlbGwnLFxuICAgIGFjdGl2aXR5OiAnb3JnLmNocm9taXVtLndlYnZpZXdfc2hlbGwuV2ViVmlld0Jyb3dzZXJBY3Rpdml0eScsXG4gIH0sXG4gIGRlZmF1bHQ6IHtcbiAgICBwa2c6ICdjb20uYW5kcm9pZC5jaHJvbWUnLFxuICAgIGFjdGl2aXR5OiAnY29tLmdvb2dsZS5hbmRyb2lkLmFwcHMuY2hyb21lLk1haW4nLFxuICB9LFxufTtcbmNvbnN0IFNFVFRJTkdTX0hFTFBFUl9QS0dfSUQgPSAnaW8uYXBwaXVtLnNldHRpbmdzJztcbmNvbnN0IFNFVFRJTkdTX0hFTFBFUl9NQUlOX0FDVElWSVRZID0gJy5TZXR0aW5ncyc7XG5jb25zdCBTRVRUSU5HU19IRUxQRVJfVU5MT0NLX0FDVElWSVRZID0gJy5VbmxvY2snO1xuXG5sZXQgaGVscGVycyA9IHt9O1xuXG5oZWxwZXJzLmNyZWF0ZUJhc2VBREIgPSBhc3luYyBmdW5jdGlvbiAob3B0cyA9IHt9KSB7XG4gIC8vIGZpbHRlciBvdXQgYW55IHVud2FudGVkIG9wdGlvbnMgc2VudCBpblxuICAvLyB0aGlzIGxpc3Qgc2hvdWxkIGJlIHVwZGF0ZWQgYXMgQURCIHRha2VzIG1vcmUgYXJndW1lbnRzXG4gIGNvbnN0IHtcbiAgICBqYXZhVmVyc2lvbixcbiAgICBhZGJQb3J0LFxuICAgIHN1cHByZXNzS2lsbFNlcnZlcixcbiAgICByZW1vdGVBZGJIb3N0LFxuICAgIGNsZWFyRGV2aWNlTG9nc09uU3RhcnQsXG4gICAgYWRiRXhlY1RpbWVvdXQsXG4gICAgdXNlS2V5c3RvcmUsXG4gICAga2V5c3RvcmVQYXRoLFxuICAgIGtleXN0b3JlUGFzc3dvcmQsXG4gICAga2V5QWxpYXMsXG4gICAga2V5UGFzc3dvcmQsXG4gIH0gPSBvcHRzO1xuICByZXR1cm4gYXdhaXQgQURCLmNyZWF0ZUFEQih7XG4gICAgamF2YVZlcnNpb24sXG4gICAgYWRiUG9ydCxcbiAgICBzdXBwcmVzc0tpbGxTZXJ2ZXIsXG4gICAgcmVtb3RlQWRiSG9zdCxcbiAgICBjbGVhckRldmljZUxvZ3NPblN0YXJ0LFxuICAgIGFkYkV4ZWNUaW1lb3V0LFxuICAgIHVzZUtleXN0b3JlLFxuICAgIGtleXN0b3JlUGF0aCxcbiAgICBrZXlzdG9yZVBhc3N3b3JkLFxuICAgIGtleUFsaWFzLFxuICAgIGtleVBhc3N3b3JkLFxuICB9KTtcbn07XG5cbmhlbHBlcnMucGFyc2VKYXZhVmVyc2lvbiA9IGZ1bmN0aW9uIChzdGRlcnIpIHtcbiAgbGV0IGxpbmVzID0gc3RkZXJyLnNwbGl0KFwiXFxuXCIpO1xuICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoLyhqYXZhfG9wZW5qZGspIHZlcnNpb24vKS50ZXN0KGxpbmUpKSB7XG4gICAgICByZXR1cm4gbGluZS5zcGxpdChcIiBcIilbMl0ucmVwbGFjZSgvXCIvZywgJycpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmhlbHBlcnMuZ2V0SmF2YVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiAobG9nVmVyc2lvbiA9IHRydWUpIHtcbiAgbGV0IHtzdGRlcnJ9ID0gYXdhaXQgZXhlYygnamF2YScsIFsnLXZlcnNpb24nXSk7XG4gIGxldCBqYXZhVmVyID0gaGVscGVycy5wYXJzZUphdmFWZXJzaW9uKHN0ZGVycik7XG4gIGlmIChqYXZhVmVyID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCB0aGUgSmF2YSB2ZXJzaW9uLiBJcyBKYXZhIGluc3RhbGxlZD9cIik7XG4gIH1cbiAgaWYgKGxvZ1ZlcnNpb24pIHtcbiAgICBsb2dnZXIuaW5mbyhgSmF2YSB2ZXJzaW9uIGlzOiAke2phdmFWZXJ9YCk7XG4gIH1cbiAgcmV0dXJuIGphdmFWZXI7XG59O1xuXG5oZWxwZXJzLnByZXBhcmVFbXVsYXRvciA9IGFzeW5jIGZ1bmN0aW9uIChhZGIsIG9wdHMpIHtcbiAgbGV0IHtcbiAgICBhdmQsXG4gICAgYXZkQXJncyxcbiAgICBsYW5ndWFnZSxcbiAgICBsb2NhbGUsXG4gICAgYXZkTGF1bmNoVGltZW91dCxcbiAgICBhdmRSZWFkeVRpbWVvdXQsXG4gIH0gPSBvcHRzO1xuICBpZiAoIWF2ZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBsYXVuY2ggQVZEIHdpdGhvdXQgQVZEIG5hbWVcIik7XG4gIH1cbiAgbGV0IGF2ZE5hbWUgPSBhdmQucmVwbGFjZSgnQCcsICcnKTtcbiAgbGV0IHJ1bm5pbmdBVkQgPSBhd2FpdCBhZGIuZ2V0UnVubmluZ0FWRChhdmROYW1lKTtcbiAgaWYgKHJ1bm5pbmdBVkQgIT09IG51bGwpIHtcbiAgICBpZiAoYXZkQXJncyAmJiBhdmRBcmdzLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIi13aXBlLWRhdGFcIikgPiAtMSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBLaWxsaW5nICcke2F2ZE5hbWV9JyBiZWNhdXNlIGl0IG5lZWRzIHRvIGJlIHdpcGVkIGF0IHN0YXJ0LmApO1xuICAgICAgYXdhaXQgYWRiLmtpbGxFbXVsYXRvcihhdmROYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmRlYnVnKFwiTm90IGxhdW5jaGluZyBBVkQgYmVjYXVzZSBpdCBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBhdmRBcmdzID0gdGhpcy5wcmVwYXJlQVZEQXJncyhvcHRzLCBhZGIsIGF2ZEFyZ3MpO1xuICBhd2FpdCBhZGIubGF1bmNoQVZEKGF2ZCwgYXZkQXJncywgbGFuZ3VhZ2UsIGxvY2FsZSwgYXZkTGF1bmNoVGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgICBhdmRSZWFkeVRpbWVvdXQpO1xufTtcblxuaGVscGVycy5wcmVwYXJlQVZEQXJncyA9IGZ1bmN0aW9uIChvcHRzLCBhZGIsIGF2ZEFyZ3MpIHtcbiAgbGV0IGFyZ3MgPSBhdmRBcmdzID8gW2F2ZEFyZ3NdIDogW107XG4gIGlmICghXy5pc1VuZGVmaW5lZChvcHRzLm5ldHdvcmtTcGVlZCkpIHtcbiAgICBsZXQgbmV0d29ya1NwZWVkID0gdGhpcy5lbnN1cmVOZXR3b3JrU3BlZWQoYWRiLCBvcHRzLm5ldHdvcmtTcGVlZCk7XG4gICAgYXJncy5wdXNoKCctbmV0c3BlZWQnLCBuZXR3b3JrU3BlZWQpO1xuICB9XG4gIGlmIChvcHRzLmlzSGVhZGxlc3MpIHtcbiAgICBhcmdzLnB1c2goJy1uby13aW5kb3cnKTtcbiAgfVxuICByZXR1cm4gYXJncy5qb2luKCcgJyk7XG59O1xuXG5oZWxwZXJzLmVuc3VyZU5ldHdvcmtTcGVlZCA9IGZ1bmN0aW9uIChhZGIsIG5ldHdvcmtTcGVlZCkge1xuICBpZiAoXy52YWx1ZXMoYWRiLk5FVFdPUktfU1BFRUQpLmluZGV4T2YobmV0d29ya1NwZWVkKSAhPT0gLTEpIHtcbiAgICByZXR1cm4gbmV0d29ya1NwZWVkO1xuICB9XG4gIGxvZ2dlci53YXJuKGBXcm9uZyBuZXR3b3JrIHNwZWVkIHBhcmFtICR7bmV0d29ya1NwZWVkfSwgdXNpbmcgZGVmYXVsdDogZnVsbC4gU3VwcG9ydGVkIHZhbHVlczogJHtfLnZhbHVlcyhhZGIuTkVUV09SS19TUEVFRCl9YCk7XG4gIHJldHVybiBhZGIuTkVUV09SS19TUEVFRC5GVUxMO1xufTtcblxuLyoqXG4gKiBTZXQgYW5kIGVuc3VyZSB0aGUgbG9jYWxlIG5hbWUgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhZGIgLSBUaGUgYWRiIG1vZHVsZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIExhbmd1YWdlLiBUaGUgbGFuZ3VhZ2UgZmllbGQgaXMgY2FzZSBpbnNlbnNpdGl2ZSwgYnV0IExvY2FsZSBhbHdheXMgY2Fub25pY2FsaXplcyB0byBsb3dlciBjYXNlLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBbYS16QS1aXXsyLDh9LiBlLmcuIGVuLCBqYSA6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9qYXZhL3V0aWwvTG9jYWxlLmh0bWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb3VudHJ5IC0gQ291bnRyeS4gVGhlIGNvdW50cnkgKHJlZ2lvbikgZmllbGQgaXMgY2FzZSBpbnNlbnNpdGl2ZSwgYnV0IExvY2FsZSBhbHdheXMgY2Fub25pY2FsaXplcyB0byB1cHBlciBjYXNlLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBbYS16QS1aXXsyfSB8IFswLTldezN9LiBlLmcuIFVTLCBKUCA6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9qYXZhL3V0aWwvTG9jYWxlLmh0bWxcbiAqIEBwYXJhbSB7P3N0cmluZ30gc2NyaXB0IC0gU2NyaXB0LiBUaGUgc2NyaXB0IGZpZWxkIGlzIGNhc2UgaW5zZW5zaXRpdmUgYnV0IExvY2FsZSBhbHdheXMgY2Fub25pY2FsaXplcyB0byB0aXRsZSBjYXNlLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBbYS16QS1aXXs0fS4gZS5nLiBIYW5zIGluIHpoLUhhbnMtQ04gOiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvamF2YS91dGlsL0xvY2FsZS5odG1sXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgaXQgZmFpbGVkIHRvIHNldCBsb2NhbGUgcHJvcGVybHlcbiAqL1xuaGVscGVycy5lbnN1cmVEZXZpY2VMb2NhbGUgPSBhc3luYyBmdW5jdGlvbiAoYWRiLCBsYW5ndWFnZSwgY291bnRyeSwgc2NyaXB0ID0gbnVsbCkge1xuICBpZiAoIV8uaXNTdHJpbmcobGFuZ3VhZ2UpICYmICFfLmlzU3RyaW5nKGNvdW50cnkpKSB7XG4gICAgbG9nZ2VyLndhcm4oYHNldERldmljZUxhbmd1YWdlQ291bnRyeSByZXF1aXJlcyBsYW5ndWFnZSBvciBjb3VudHJ5LmApO1xuICAgIGxvZ2dlci53YXJuKGBHb3QgbGFuZ3VhZ2U6ICcke2xhbmd1YWdlfScgYW5kIGNvdW50cnk6ICcke2NvdW50cnl9J2ApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGF3YWl0IGFkYi5zZXREZXZpY2VMYW5ndWFnZUNvdW50cnkobGFuZ3VhZ2UsIGNvdW50cnksIHNjcmlwdCk7XG5cbiAgaWYgKCFhd2FpdCBhZGIuZW5zdXJlQ3VycmVudExvY2FsZShsYW5ndWFnZSwgY291bnRyeSwgc2NyaXB0KSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBzY3JpcHQgPyBgbGFuZ3VhZ2U6ICR7bGFuZ3VhZ2V9LCBjb3VudHJ5OiAke2NvdW50cnl9IGFuZCBzY3JpcHQ6ICR7c2NyaXB0fWAgOiBgbGFuZ3VhZ2U6ICR7bGFuZ3VhZ2V9IGFuZCBjb3VudHJ5OiAke2NvdW50cnl9YDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgJHttZXNzYWdlfWApO1xuICB9XG59O1xuXG5oZWxwZXJzLmdldERldmljZUluZm9Gcm9tQ2FwcyA9IGFzeW5jIGZ1bmN0aW9uIChvcHRzID0ge30pIHtcbiAgLy8gd2UgY2FuIGNyZWF0ZSBhIHRocm93YXdheSBBREIgaW5zdGFuY2UgaGVyZSwgc28gdGhlcmUgaXMgbm8gZGVwZW5kZW5jeVxuICAvLyBvbiBpbnN0YW50aWF0aW5nIG9uIGVhcmxpZXIgKGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgbm8gdWRpZClcbiAgLy8gd2UgY2FuIG9ubHkgdXNlIHRoaXMgQURCIG9iamVjdCBmb3IgY29tbWFuZHMgdGhhdCB3b3VsZCBub3QgYmUgY29uZnVzZWRcbiAgLy8gaWYgbXVsdGlwbGUgZGV2aWNlcyBhcmUgY29ubmVjdGVkXG4gIGNvbnN0IGFkYiA9IGF3YWl0IGhlbHBlcnMuY3JlYXRlQmFzZUFEQihvcHRzKTtcbiAgbGV0IHVkaWQgPSBvcHRzLnVkaWQ7XG4gIGxldCBlbVBvcnQgPSBudWxsO1xuXG4gIC8vIGEgc3BlY2lmaWMgYXZkIG5hbWUgd2FzIGdpdmVuLiB0cnkgdG8gaW5pdGlhbGl6ZSB3aXRoIHRoYXRcbiAgaWYgKG9wdHMuYXZkKSB7XG4gICAgYXdhaXQgaGVscGVycy5wcmVwYXJlRW11bGF0b3IoYWRiLCBvcHRzKTtcbiAgICB1ZGlkID0gYWRiLmN1ckRldmljZUlkO1xuICAgIGVtUG9ydCA9IGFkYi5lbXVsYXRvclBvcnQ7XG4gIH0gZWxzZSB7XG4gICAgLy8gbm8gYXZkIGdpdmVuLiBsZXRzIHRyeSB3aGF0ZXZlcidzIHBsdWdnZWQgaW4gZGV2aWNlcy9lbXVsYXRvcnNcbiAgICBsb2dnZXIuaW5mbyhcIlJldHJpZXZpbmcgZGV2aWNlIGxpc3RcIik7XG4gICAgbGV0IGRldmljZXMgPSBhd2FpdCBhZGIuZ2V0RGV2aWNlc1dpdGhSZXRyeSgpO1xuXG4gICAgLy8gdWRpZCB3YXMgZ2l2ZW4sIGxldHMgdHJ5IHRvIGluaXQgd2l0aCB0aGF0IGRldmljZVxuICAgIGlmICh1ZGlkKSB7XG4gICAgICBpZiAoIV8uaW5jbHVkZXMoXy5tYXAoZGV2aWNlcywgJ3VkaWQnKSwgdWRpZCkpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yQW5kVGhyb3coYERldmljZSAke3VkaWR9IHdhcyBub3QgaW4gdGhlIGxpc3Qgb2YgY29ubmVjdGVkIGRldmljZXNgKTtcbiAgICAgIH1cbiAgICAgIGVtUG9ydCA9IGFkYi5nZXRQb3J0RnJvbUVtdWxhdG9yU3RyaW5nKHVkaWQpO1xuICAgIH0gZWxzZSBpZiAob3B0cy5wbGF0Zm9ybVZlcnNpb24pIHtcbiAgICAgIG9wdHMucGxhdGZvcm1WZXJzaW9uID0gYCR7b3B0cy5wbGF0Zm9ybVZlcnNpb259YC50cmltKCk7XG5cbiAgICAgIC8vIGEgcGxhdGZvcm0gdmVyc2lvbiB3YXMgZ2l2ZW4uIGxldHMgdHJ5IHRvIGZpbmQgYSBkZXZpY2Ugd2l0aCB0aGUgc2FtZSBvc1xuICAgICAgbG9nZ2VyLmluZm8oYExvb2tpbmcgZm9yIGEgZGV2aWNlIHdpdGggQW5kcm9pZCAnJHtvcHRzLnBsYXRmb3JtVmVyc2lvbn0nYCk7XG5cbiAgICAgIC8vIGluIGNhc2Ugd2UgZmFpbCB0byBmaW5kIHNvbWV0aGluZywgZ2l2ZSB0aGUgdXNlciBhIHVzZWZ1bCBsb2cgdGhhdCBoYXNcbiAgICAgIC8vIHRoZSBkZXZpY2UgdWRpZHMgYW5kIG9zIHZlcnNpb25zIHNvIHRoZXkga25vdyB3aGF0J3MgYXZhaWxhYmxlXG4gICAgICBsZXQgYXZhaWxEZXZpY2VzU3RyID0gW107XG5cbiAgICAgIC8vIGZpcnN0IHRyeSBzdGFydGVkIGRldmljZXMvZW11bGF0b3JzXG4gICAgICBmb3IgKGxldCBkZXZpY2Ugb2YgZGV2aWNlcykge1xuICAgICAgICAvLyBkaXJlY3QgYWRiIGNhbGxzIHRvIHRoZSBzcGVjaWZpYyBkZXZpY2VcbiAgICAgICAgYXdhaXQgYWRiLnNldERldmljZUlkKGRldmljZS51ZGlkKTtcbiAgICAgICAgbGV0IGRldmljZU9TID0gYXdhaXQgYWRiLmdldFBsYXRmb3JtVmVyc2lvbigpO1xuXG4gICAgICAgIC8vIGJ1aWxkIHVwIG91ciBpbmZvIHN0cmluZyBvZiBhdmFpbGFibGUgZGV2aWNlcyBhcyB3ZSBpdGVyYXRlXG4gICAgICAgIGF2YWlsRGV2aWNlc1N0ci5wdXNoKGAke2RldmljZS51ZGlkfSAoJHtkZXZpY2VPU30pYCk7XG5cbiAgICAgICAgLy8gd2UgZG8gYSBiZWdpbnMgd2l0aCBjaGVjayBmb3IgaW1wbGllZCB3aWxkY2FyZCBtYXRjaGluZ1xuICAgICAgICAvLyBlZzogNCBtYXRjaGVzIDQuMSwgNC4wLCA0LjEuMy1zYW1zdW5nLCBldGNcbiAgICAgICAgaWYgKGRldmljZU9TLmluZGV4T2Yob3B0cy5wbGF0Zm9ybVZlcnNpb24pID09PSAwKSB7XG4gICAgICAgICAgdWRpZCA9IGRldmljZS51ZGlkO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGNvdWxkbid0IGZpbmQgYW55dGhpbmchIHF1aXRcbiAgICAgIGlmICghdWRpZCkge1xuICAgICAgICBsb2dnZXIuZXJyb3JBbmRUaHJvdyhgVW5hYmxlIHRvIGZpbmQgYW4gYWN0aXZlIGRldmljZSBvciBlbXVsYXRvciBgICtcbiAgICAgICAgICBgd2l0aCBPUyAke29wdHMucGxhdGZvcm1WZXJzaW9ufS4gVGhlIGZvbGxvd2luZyBhcmUgYXZhaWxhYmxlOiBgICsgYXZhaWxEZXZpY2VzU3RyLmpvaW4oJywgJykpO1xuICAgICAgfVxuXG4gICAgICBlbVBvcnQgPSBhZGIuZ2V0UG9ydEZyb21FbXVsYXRvclN0cmluZyh1ZGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYSB1ZGlkIHdhcyBub3QgZ2l2ZW4sIGdyYWIgdGhlIGZpcnN0IGRldmljZSB3ZSBzZWVcbiAgICAgIHVkaWQgPSBkZXZpY2VzWzBdLnVkaWQ7XG4gICAgICBlbVBvcnQgPSBhZGIuZ2V0UG9ydEZyb21FbXVsYXRvclN0cmluZyh1ZGlkKTtcbiAgICB9XG4gIH1cblxuICBsb2dnZXIuaW5mbyhgVXNpbmcgZGV2aWNlOiAke3VkaWR9YCk7XG4gIHJldHVybiB7dWRpZCwgZW1Qb3J0fTtcbn07XG5cbi8vIHJldHVybnMgYSBuZXcgYWRiIGluc3RhbmNlIHdpdGggZGV2aWNlSWQgc2V0XG5oZWxwZXJzLmNyZWF0ZUFEQiA9IGFzeW5jIGZ1bmN0aW9uIChvcHRzID0ge30pIHtcbiAgY29uc3Qge3VkaWQsIGVtUG9ydH0gPSBvcHRzO1xuICBjb25zdCBhZGIgPSBhd2FpdCBoZWxwZXJzLmNyZWF0ZUJhc2VBREIob3B0cyk7XG4gIGFkYi5zZXREZXZpY2VJZCh1ZGlkKTtcbiAgaWYgKGVtUG9ydCkge1xuICAgIGFkYi5zZXRFbXVsYXRvclBvcnQoZW1Qb3J0KTtcbiAgfVxuXG4gIHJldHVybiBhZGI7XG59O1xuXG5oZWxwZXJzLnZhbGlkYXRlUGFja2FnZUFjdGl2aXR5TmFtZXMgPSBmdW5jdGlvbiAob3B0cykge1xuICBmb3IgKGNvbnN0IGtleSBvZiBbJ2FwcFBhY2thZ2UnLCAnYXBwQWN0aXZpdHknLCAnYXBwV2FpdFBhY2thZ2UnLCAnYXBwV2FpdEFjdGl2aXR5J10pIHtcbiAgICBjb25zdCBuYW1lID0gb3B0c1trZXldO1xuICAgIGlmICghbmFtZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2ggPSAvKFteXFx3LiosXSkrLy5leGVjKG5hbWUpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGxvZ2dlci53YXJuKGBDYXBhYmlsaXR5ICcke2tleX0nIGlzIGV4cGVjdGVkIHRvIG9ubHkgaW5jbHVkZSBsYXRpbiBsZXR0ZXJzLCBkaWdpdHMsIHVuZGVyc2NvcmUsIGRvdCwgY29tbWEgYW5kIGFzdGVyaXNrIGNoYXJhY3RlcnMuYCk7XG4gICAgbG9nZ2VyLndhcm4oYEN1cnJlbnQgdmFsdWUgJyR7bmFtZX0nIGhhcyBub24tbWF0Y2hpbmcgY2hhcmFjdGVyIGF0IGluZGV4ICR7bWF0Y2guaW5kZXh9OiAnJHtuYW1lLnN1YnN0cmluZygwLCBtYXRjaC5pbmRleCArIDEpfSdgKTtcbiAgfVxufTtcblxuaGVscGVycy5nZXRMYXVuY2hJbmZvID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgb3B0cykge1xuICBsZXQge2FwcCwgYXBwUGFja2FnZSwgYXBwQWN0aXZpdHksIGFwcFdhaXRQYWNrYWdlLCBhcHBXYWl0QWN0aXZpdHl9ID0gb3B0cztcbiAgaWYgKCFhcHApIHtcbiAgICBsb2dnZXIud2FybihcIk5vIGFwcCBzZW50IGluLCBub3QgcGFyc2luZyBwYWNrYWdlL2FjdGl2aXR5XCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMudmFsaWRhdGVQYWNrYWdlQWN0aXZpdHlOYW1lcyhvcHRzKTtcblxuICBpZiAoYXBwUGFja2FnZSAmJiBhcHBBY3Rpdml0eSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxvZ2dlci5kZWJ1ZyhcIlBhcnNpbmcgcGFja2FnZSBhbmQgYWN0aXZpdHkgZnJvbSBhcHAgbWFuaWZlc3RcIik7XG4gIGxldCB7YXBrUGFja2FnZSwgYXBrQWN0aXZpdHl9ID1cbiAgICBhd2FpdCBhZGIucGFja2FnZUFuZExhdW5jaEFjdGl2aXR5RnJvbU1hbmlmZXN0KGFwcCk7XG4gIGlmIChhcGtQYWNrYWdlICYmICFhcHBQYWNrYWdlKSB7XG4gICAgYXBwUGFja2FnZSA9IGFwa1BhY2thZ2U7XG4gIH1cbiAgaWYgKCFhcHBXYWl0UGFja2FnZSkge1xuICAgIGFwcFdhaXRQYWNrYWdlID0gYXBwUGFja2FnZTtcbiAgfVxuICBpZiAoYXBrQWN0aXZpdHkgJiYgIWFwcEFjdGl2aXR5KSB7XG4gICAgYXBwQWN0aXZpdHkgPSBhcGtBY3Rpdml0eTtcbiAgfVxuICBpZiAoIWFwcFdhaXRBY3Rpdml0eSkge1xuICAgIGFwcFdhaXRBY3Rpdml0eSA9IGFwcEFjdGl2aXR5O1xuICB9XG4gIGxvZ2dlci5kZWJ1ZyhgUGFyc2VkIHBhY2thZ2UgYW5kIGFjdGl2aXR5IGFyZTogJHthcGtQYWNrYWdlfS8ke2Fwa0FjdGl2aXR5fWApO1xuICByZXR1cm4ge2FwcFBhY2thZ2UsIGFwcFdhaXRQYWNrYWdlLCBhcHBBY3Rpdml0eSwgYXBwV2FpdEFjdGl2aXR5fTtcbn07XG5cbmhlbHBlcnMucmVzZXRBcHAgPSBhc3luYyBmdW5jdGlvbiAoYWRiLCBvcHRzID0ge30pIHtcbiAgY29uc3Qge1xuICAgIGFwcCxcbiAgICBhcHBQYWNrYWdlLFxuICAgIGZhc3RSZXNldCxcbiAgICBmdWxsUmVzZXQsXG4gICAgYW5kcm9pZEluc3RhbGxUaW1lb3V0ID0gUEFDS0FHRV9JTlNUQUxMX1RJTUVPVVQsXG4gICAgYXV0b0dyYW50UGVybWlzc2lvbnMsXG4gICAgYWxsb3dUZXN0UGFja2FnZXNcbiAgfSA9IG9wdHM7XG5cbiAgaWYgKCFhcHBQYWNrYWdlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiJ2FwcFBhY2thZ2UnIG9wdGlvbiBpcyByZXF1aXJlZFwiKTtcbiAgfVxuXG4gIGNvbnN0IGlzSW5zdGFsbGVkID0gYXdhaXQgYWRiLmlzQXBwSW5zdGFsbGVkKGFwcFBhY2thZ2UpO1xuXG4gIGlmIChpc0luc3RhbGxlZCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBhZGIuZm9yY2VTdG9wKGFwcFBhY2thZ2UpO1xuICAgIH0gY2F0Y2ggKGlnbikge31cbiAgICAvLyBmdWxsUmVzZXQgaGFzIHByaW9yaXR5IG92ZXIgZmFzdFJlc2V0XG4gICAgaWYgKCFmdWxsUmVzZXQgJiYgZmFzdFJlc2V0KSB7XG4gICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCBhZGIuY2xlYXIoYXBwUGFja2FnZSk7XG4gICAgICBpZiAoXy5pc1N0cmluZyhvdXRwdXQpICYmIG91dHB1dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdmYWlsZWQnKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjbGVhciB0aGUgYXBwbGljYXRpb24gZGF0YSBvZiAnJHthcHBQYWNrYWdlfScuIE9yaWdpbmFsIGVycm9yOiAke291dHB1dH1gKTtcbiAgICAgIH1cbiAgICAgIC8vIGV4ZWN1dGluZyBgc2hlbGwgcG0gY2xlYXJgIHJlc2V0cyBwcmV2aW91c2x5IGFzc2lnbmVkIGFwcGxpY2F0aW9uIHBlcm1pc3Npb25zIGFzIHdlbGxcbiAgICAgIGlmIChhdXRvR3JhbnRQZXJtaXNzaW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGFkYi5ncmFudEFsbFBlcm1pc3Npb25zKGFwcFBhY2thZ2UpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihgVW5hYmxlIHRvIGdyYW50IHBlcm1pc3Npb25zIHJlcXVlc3RlZC4gT3JpZ2luYWwgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbG9nZ2VyLmRlYnVnKGBQZXJmb3JtZWQgZmFzdCByZXNldCBvbiB0aGUgaW5zdGFsbGVkICcke2FwcFBhY2thZ2V9JyBhcHBsaWNhdGlvbiAoc3RvcCBhbmQgY2xlYXIpYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaWYgKCFhcHApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCInYXBwJyBvcHRpb24gaXMgcmVxdWlyZWQgZm9yIHJlaW5zdGFsbFwiKTtcbiAgfVxuXG4gIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBmdWxsIHJlc2V0IG9uICcke2FwcFBhY2thZ2V9JyAocmVpbnN0YWxsKWApO1xuICBpZiAoaXNJbnN0YWxsZWQpIHtcbiAgICBhd2FpdCBhZGIudW5pbnN0YWxsQXBrKGFwcFBhY2thZ2UpO1xuICB9XG4gIGF3YWl0IGFkYi5pbnN0YWxsKGFwcCwge1xuICAgIGdyYW50UGVybWlzc2lvbnM6IGF1dG9HcmFudFBlcm1pc3Npb25zLFxuICAgIHRpbWVvdXQ6IGFuZHJvaWRJbnN0YWxsVGltZW91dCxcbiAgICBhbGxvd1Rlc3RQYWNrYWdlcyxcbiAgfSk7XG59O1xuXG5oZWxwZXJzLmluc3RhbGxBcGsgPSBhc3luYyBmdW5jdGlvbiAoYWRiLCBvcHRzID0ge30pIHtcbiAgY29uc3Qge1xuICAgIGFwcCxcbiAgICBhcHBQYWNrYWdlLFxuICAgIGZhc3RSZXNldCxcbiAgICBmdWxsUmVzZXQsXG4gICAgYW5kcm9pZEluc3RhbGxUaW1lb3V0ID0gUEFDS0FHRV9JTlNUQUxMX1RJTUVPVVQsXG4gICAgYXV0b0dyYW50UGVybWlzc2lvbnMsXG4gICAgYWxsb3dUZXN0UGFja2FnZXNcbiAgfSA9IG9wdHM7XG5cbiAgaWYgKCFhcHAgfHwgIWFwcFBhY2thZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCInYXBwJyBhbmQgJ2FwcFBhY2thZ2UnIG9wdGlvbnMgYXJlIHJlcXVpcmVkXCIpO1xuICB9XG5cbiAgaWYgKGZ1bGxSZXNldCkge1xuICAgIGF3YWl0IHRoaXMucmVzZXRBcHAoYWRiLCBvcHRzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIHJlc2V0IHRoZSBuZXdseSBpbnN0YWxsZWQgYXBwXG4gIGNvbnN0IHNob3VsZFBlcmZvcm1GYXN0UmVzZXQgPSBmYXN0UmVzZXQgJiYgYXdhaXQgYWRiLmlzQXBwSW5zdGFsbGVkKGFwcFBhY2thZ2UpO1xuXG4gIGF3YWl0IGFkYi5pbnN0YWxsT3JVcGdyYWRlKGFwcCwgYXBwUGFja2FnZSwge1xuICAgIGdyYW50UGVybWlzc2lvbnM6IGF1dG9HcmFudFBlcm1pc3Npb25zLFxuICAgIHRpbWVvdXQ6IGFuZHJvaWRJbnN0YWxsVGltZW91dCxcbiAgICBhbGxvd1Rlc3RQYWNrYWdlcyxcbiAgfSk7XG5cbiAgaWYgKHNob3VsZFBlcmZvcm1GYXN0UmVzZXQpIHtcbiAgICBsb2dnZXIuaW5mbyhgUGVyZm9ybWluZyBmYXN0IHJlc2V0IG9uICcke2FwcFBhY2thZ2V9J2ApO1xuICAgIGF3YWl0IHRoaXMucmVzZXRBcHAoYWRiLCBvcHRzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbnN0YWxscyBhbiBhcnJheSBvZiBhcGtzXG4gKiBAcGFyYW0ge0FEQn0gYWRiIEluc3RhbmNlIG9mIEFwcGl1bSBBREIgb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRzIGRlZmluZWQgaW4gZHJpdmVyLmpzXG4gKi9cbmhlbHBlcnMuaW5zdGFsbE90aGVyQXBrcyA9IGFzeW5jIGZ1bmN0aW9uIChvdGhlckFwcHMsIGFkYiwgb3B0cykge1xuICBsZXQge1xuICAgIGFuZHJvaWRJbnN0YWxsVGltZW91dCA9IFBBQ0tBR0VfSU5TVEFMTF9USU1FT1VULFxuICAgIGF1dG9HcmFudFBlcm1pc3Npb25zLFxuICAgIGFsbG93VGVzdFBhY2thZ2VzXG4gIH0gPSBvcHRzO1xuXG4gIC8vIEluc3RhbGwgYWxsIG9mIHRoZSBBUEsncyBhc3luY2hyb25vdXNseVxuICBhd2FpdCBCLmFsbChvdGhlckFwcHMubWFwKChvdGhlckFwcCkgPT4ge1xuICAgIGxvZ2dlci5kZWJ1ZyhgSW5zdGFsbGluZyBhcHA6ICR7b3RoZXJBcHB9YCk7XG4gICAgcmV0dXJuIGFkYi5pbnN0YWxsT3JVcGdyYWRlKG90aGVyQXBwLCBudWxsLCB7XG4gICAgICBncmFudFBlcm1pc3Npb25zOiBhdXRvR3JhbnRQZXJtaXNzaW9ucyxcbiAgICAgIHRpbWVvdXQ6IGFuZHJvaWRJbnN0YWxsVGltZW91dCxcbiAgICAgIGFsbG93VGVzdFBhY2thZ2VzLFxuICAgIH0pO1xuICB9KSk7XG59O1xuXG5oZWxwZXJzLmluaXRVbmljb2RlS2V5Ym9hcmQgPSBhc3luYyBmdW5jdGlvbiAoYWRiKSB7XG4gIGxvZ2dlci5kZWJ1ZygnRW5hYmxpbmcgVW5pY29kZSBrZXlib2FyZCBzdXBwb3J0Jyk7XG5cbiAgLy8gZ2V0IHRoZSBkZWZhdWx0IElNRSBzbyB3ZSBjYW4gcmV0dXJuIGJhY2sgdG8gaXQgbGF0ZXIgaWYgd2Ugd2FudFxuICBsZXQgZGVmYXVsdElNRSA9IGF3YWl0IGFkYi5kZWZhdWx0SU1FKCk7XG5cbiAgbG9nZ2VyLmRlYnVnKGBVbnNldHRpbmcgcHJldmlvdXMgSU1FICR7ZGVmYXVsdElNRX1gKTtcbiAgY29uc3QgYXBwaXVtSU1FID0gYCR7U0VUVElOR1NfSEVMUEVSX1BLR19JRH0vLlVuaWNvZGVJTUVgO1xuICBsb2dnZXIuZGVidWcoYFNldHRpbmcgSU1FIHRvICcke2FwcGl1bUlNRX0nYCk7XG4gIGF3YWl0IGFkYi5lbmFibGVJTUUoYXBwaXVtSU1FKTtcbiAgYXdhaXQgYWRiLnNldElNRShhcHBpdW1JTUUpO1xuICByZXR1cm4gZGVmYXVsdElNRTtcbn07XG5cbmhlbHBlcnMuc2V0TW9ja0xvY2F0aW9uQXBwID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgYXBwKSB7XG4gIHRyeSB7XG4gICAgaWYgKGF3YWl0IGFkYi5nZXRBcGlMZXZlbCgpIDwgMjMpIHtcbiAgICAgIGF3YWl0IGFkYi5zaGVsbChbJ3NldHRpbmdzJywgJ3B1dCcsICdzZWN1cmUnLCAnbW9ja19sb2NhdGlvbicsICcxJ10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBhZGIuc2hlbGwoWydhcHBvcHMnLCAnc2V0JywgYXBwLCAnYW5kcm9pZDptb2NrX2xvY2F0aW9uJywgJ2FsbG93J10pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLndhcm4oYFVuYWJsZSB0byBzZXQgbW9jayBsb2NhdGlvbiBmb3IgYXBwICcke2FwcH0nOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG59O1xuXG5oZWxwZXJzLmluc3RhbGxIZWxwZXJBcHAgPSBhc3luYyBmdW5jdGlvbiAoYWRiLCBhcGtQYXRoLCBwYWNrYWdlSWQsIGFwcE5hbWUpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBhZGIuaW5zdGFsbE9yVXBncmFkZShhcGtQYXRoLCBwYWNrYWdlSWQsIHtncmFudFBlcm1pc3Npb25zOiB0cnVlfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci53YXJuKGBJZ25vcmVkIGVycm9yIHdoaWxlIGluc3RhbGxpbmcgQXBwaXVtICR7YXBwTmFtZX0gaGVscGVyOiBgICtcbiAgICAgICAgICAgICAgICBgJyR7ZXJyLm1lc3NhZ2V9Jy4gTWFudWFsbHkgdW5pbnN0YWxsaW5nIHRoZSBhcHBsaWNhdGlvbiBgICtcbiAgICAgICAgICAgICAgICBgd2l0aCBwYWNrYWdlIGlkICcke3BhY2thZ2VJZH0nIG1heSBoZWxwLiBFeHBlY3Qgc29tZSBBcHBpdW0gYCArXG4gICAgICAgICAgICAgICAgYGZlYXR1cmVzIG1heSBub3Qgd29yayBhcyBleHBlY3RlZCB1bmxlc3MgdGhpcyBwcm9ibGVtIGlzIGAgK1xuICAgICAgICAgICAgICAgIGBmaXhlZC5gKTtcbiAgfVxufTtcblxuaGVscGVycy5wdXNoU2V0dGluZ3NBcHAgPSBhc3luYyBmdW5jdGlvbiAoYWRiLCB0aHJvd0Vycm9yID0gZmFsc2UpIHtcbiAgbG9nZ2VyLmRlYnVnKFwiUHVzaGluZyBzZXR0aW5ncyBhcGsgdG8gZGV2aWNlLi4uXCIpO1xuXG4gIGF3YWl0IGhlbHBlcnMuaW5zdGFsbEhlbHBlckFwcChhZGIsIHNldHRpbmdzQXBrUGF0aCwgU0VUVElOR1NfSEVMUEVSX1BLR19JRCwgJ1NldHRpbmdzJyk7XG5cbiAgLy8gUmVpbnN0YWxsIHdpbGwgc3RvcCB0aGUgc2V0dGluZ3MgaGVscGVyIHByb2Nlc3MgYW55d2F5LCBzb1xuICAvLyB0aGVyZSBpcyBubyBuZWVkIHRvIGNvbnRpbnVlIGlmIHRoZSBhcHBsaWNhdGlvbiBpcyBzdGlsbCBydW5uaW5nXG4gIGlmIChhd2FpdCBhZGIucHJvY2Vzc0V4aXN0cyhTRVRUSU5HU19IRUxQRVJfUEtHX0lEKSkge1xuICAgIGxvZ2dlci5kZWJ1ZyhgJHtTRVRUSU5HU19IRUxQRVJfUEtHX0lEfSBpcyBhbHJlYWR5IHJ1bm5pbmcuIGAgK1xuICAgICAgYFRoZXJlIGlzIG5vIG5lZWQgdG8gcmVzZXQgaXRzIHBlcm1pc3Npb25zLmApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChhd2FpdCBhZGIuZ2V0QXBpTGV2ZWwoKSA8PSAyMykgeyAvLyBBbmRyb2lkIDYtIGRldmljZXMgc2hvdWxkIGhhdmUgZ3JhbnRlZCBwZXJtaXNzaW9uc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL3B1bGwvMTE2NDAjaXNzdWVjb21tZW50LTQzODI2MDQ3N1xuICAgIGxvZ2dlci5pbmZvKCdHcmFudGluZyBhbmRyb2lkLnBlcm1pc3Npb24uU0VUX0FOSU1BVElPTl9TQ0FMRSwgQ0hBTkdFX0NPTkZJR1VSQVRJT04sIEFDQ0VTU19GSU5FX0xPQ0FUSU9OIGJ5IHBtIGdyYW50Jyk7XG4gICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbnMoU0VUVElOR1NfSEVMUEVSX1BLR19JRCwgW1xuICAgICAgJ2FuZHJvaWQucGVybWlzc2lvbi5TRVRfQU5JTUFUSU9OX1NDQUxFJyxcbiAgICAgICdhbmRyb2lkLnBlcm1pc3Npb24uQ0hBTkdFX0NPTkZJR1VSQVRJT04nLFxuICAgICAgJ2FuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfRklORV9MT0NBVElPTidcbiAgICBdKTtcbiAgfVxuXG4gIC8vIGxhdW5jaCBpby5hcHBpdW0uc2V0dGluZ3MgYXBwIGR1ZSB0byBzZXR0aW5ncyBmYWlsaW5nIHRvIGJlIHNldFxuICAvLyBpZiB0aGUgYXBwIGlzIG5vdCBsYXVuY2hlZCBwcmlvciB0byBzdGFydCB0aGUgc2Vzc2lvbiBvbiBhbmRyb2lkIDcrXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvODk1N1xuICB0cnkge1xuICAgIGF3YWl0IGFkYi5zdGFydEFwcCh7XG4gICAgICBwa2c6IFNFVFRJTkdTX0hFTFBFUl9QS0dfSUQsXG4gICAgICBhY3Rpdml0eTogU0VUVElOR1NfSEVMUEVSX01BSU5fQUNUSVZJVFksXG4gICAgICBhY3Rpb246IFwiYW5kcm9pZC5pbnRlbnQuYWN0aW9uLk1BSU5cIixcbiAgICAgIGNhdGVnb3J5OiBcImFuZHJvaWQuaW50ZW50LmNhdGVnb3J5LkxBVU5DSEVSXCIsXG4gICAgICBmbGFnczogXCIweDEwMjAwMDAwXCIsXG4gICAgICBzdG9wQXBwOiBmYWxzZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBsYXVuY2ggc2V0dGluZ3MgYXBwOiAke2Vyci5tZXNzYWdlfWApO1xuICAgIGlmICh0aHJvd0Vycm9yKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEV4dHJhY3RzIHN0cmluZy54bWwgYW5kIGNvbnZlcnRzIGl0IHRvIHN0cmluZy5qc29uIGFuZCBwdXNoZXNcbiAqIGl0IHRvIC9kYXRhL2xvY2FsL3RtcC9zdHJpbmcuanNvbiBvbiBmb3IgdXNlIG9mIGJvb3RzdHJhcFxuICogSWYgYXBwIGlzIG5vdCBwcmVzZW50IHRvIGV4dHJhY3Qgc3RyaW5nLnhtbCBpdCBkZWxldGVzIHJlbW90ZSBzdHJpbmdzLmpzb25cbiAqIElmIGFwcCBkb2VzIG5vdCBoYXZlIHN0cmluZ3MueG1sIHdlIHB1c2ggYW4gZW1wdHkganNvbiBvYmplY3QgdG8gcmVtb3RlXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBsYW5ndWFnZSAtIExhbmd1YWdlIGFiYnJldmlhdGlvbiwgZm9yIGV4YW1wbGUgJ2ZyJy4gVGhlIGRlZmF1bHQgbGFuZ3VhZ2VcbiAqIGlzIHVzZWQgaWYgdGhpcyBhcmd1bWVudCBpcyBub3QgZGVmaW5lZC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBhZGIgLSBUaGUgYWRiIG1vZHVsZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gRHJpdmVyIG9wdGlvbnMgZGljdGlvbmFyeS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBkaWN0aW9uYXJ5LCB3aGVyZSBzdHJpbmcgcmVzb3VyY2UgaWRlbnRpZmllcnMgYXJlIGtleXNcbiAqIGFsb25nIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZyB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZSBvciBhbiBlbXB0eSBvYmplY3RcbiAqIGlmIG5vIG1hdGNoaW5nIHJlc291cmNlcyB3ZXJlIGV4dHJhY3RlZC5cbiAqL1xuaGVscGVycy5wdXNoU3RyaW5ncyA9IGFzeW5jIGZ1bmN0aW9uIChsYW5ndWFnZSwgYWRiLCBvcHRzKSB7XG4gIGNvbnN0IHJlbW90ZURpciA9ICcvZGF0YS9sb2NhbC90bXAnO1xuICBjb25zdCBzdHJpbmdzSnNvbiA9ICdzdHJpbmdzLmpzb24nO1xuICBjb25zdCByZW1vdGVGaWxlID0gcGF0aC5wb3NpeC5yZXNvbHZlKHJlbW90ZURpciwgc3RyaW5nc0pzb24pO1xuXG4gIC8vIGNsZWFuIHVwIHJlbW90ZSBzdHJpbmcuanNvbiBpZiBwcmVzZW50XG4gIGF3YWl0IGFkYi5yaW1yYWYocmVtb3RlRmlsZSk7XG5cbiAgbGV0IGFwcDtcbiAgdHJ5IHtcbiAgICBhcHAgPSBvcHRzLmFwcCB8fCBhd2FpdCBhZGIucHVsbEFwayhvcHRzLmFwcFBhY2thZ2UsIG9wdHMudG1wRGlyKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLmluZm8oYEZhaWxlZCB0byBwdWxsIGFuIGFwayBmcm9tICcke29wdHMuYXBwUGFja2FnZX0nIHRvICcke29wdHMudG1wRGlyfScuIE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG5cbiAgaWYgKF8uaXNFbXB0eShvcHRzLmFwcFBhY2thZ2UpIHx8ICEoYXdhaXQgZnMuZXhpc3RzKGFwcCkpKSB7XG4gICAgbG9nZ2VyLmRlYnVnKGBObyBhcHAgb3IgcGFja2FnZSBzcGVjaWZpZWQuIFJldHVybmluZyBlbXB0eSBzdHJpbmdzYCk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgY29uc3Qgc3RyaW5nc1RtcERpciA9IHBhdGgucmVzb2x2ZShvcHRzLnRtcERpciwgb3B0cy5hcHBQYWNrYWdlKTtcbiAgdHJ5IHtcbiAgICBsb2dnZXIuZGVidWcoJ0V4dHJhY3Rpbmcgc3RyaW5ncyBmcm9tIGFwaycsIGFwcCwgbGFuZ3VhZ2UsIHN0cmluZ3NUbXBEaXIpO1xuICAgIGNvbnN0IHthcGtTdHJpbmdzLCBsb2NhbFBhdGh9ID0gYXdhaXQgYWRiLmV4dHJhY3RTdHJpbmdzRnJvbUFwayhhcHAsIGxhbmd1YWdlLCBzdHJpbmdzVG1wRGlyKTtcbiAgICBhd2FpdCBhZGIucHVzaChsb2NhbFBhdGgsIHJlbW90ZURpcik7XG4gICAgcmV0dXJuIGFwa1N0cmluZ3M7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci53YXJuKGBDb3VsZCBub3QgZ2V0IHN0cmluZ3MsIGNvbnRpbnVpbmcgYW55d2F5LiBPcmlnaW5hbCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgICBhd2FpdCBhZGIuc2hlbGwoJ2VjaG8nLCBbYCd7fScgPiAke3JlbW90ZUZpbGV9YF0pO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGZzLnJpbXJhZihzdHJpbmdzVG1wRGlyKTtcbiAgfVxuICByZXR1cm4ge307XG59O1xuXG5oZWxwZXJzLnVubG9ja1dpdGhVSUF1dG9tYXRpb24gPSBhc3luYyBmdW5jdGlvbiAoZHJpdmVyLCBhZGIsIHVubG9ja0NhcGFiaWxpdGllcykge1xuICBsZXQgdW5sb2NrVHlwZSA9IHVubG9ja0NhcGFiaWxpdGllcy51bmxvY2tUeXBlO1xuICBpZiAoIXVubG9ja2VyLmlzVmFsaWRVbmxvY2tUeXBlKHVubG9ja1R5cGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHVubG9jayB0eXBlICR7dW5sb2NrVHlwZX1gKTtcbiAgfVxuICBsZXQgdW5sb2NrS2V5ID0gdW5sb2NrQ2FwYWJpbGl0aWVzLnVubG9ja0tleTtcbiAgaWYgKCF1bmxvY2tlci5pc1ZhbGlkS2V5KHVubG9ja1R5cGUsIHVubG9ja0tleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgdW5sb2NrS2V5ICR7dW5sb2NrS2V5fSBjYXBhYmlsaXR5IGZvciB1bmxvY2tUeXBlICR7dW5sb2NrVHlwZX1gKTtcbiAgfVxuICBjb25zdCB1bmxvY2tNZXRob2QgPSB7XG4gICAgW1BJTl9VTkxPQ0tdOiB1bmxvY2tlci5waW5VbmxvY2ssXG4gICAgW1BBU1NXT1JEX1VOTE9DS106IHVubG9ja2VyLnBhc3N3b3JkVW5sb2NrLFxuICAgIFtQQVRURVJOX1VOTE9DS106IHVubG9ja2VyLnBhdHRlcm5VbmxvY2ssXG4gICAgW0ZJTkdFUlBSSU5UX1VOTE9DS106IHVubG9ja2VyLmZpbmdlcnByaW50VW5sb2NrXG4gIH1bdW5sb2NrVHlwZV07XG4gIGF3YWl0IHVubG9ja01ldGhvZChhZGIsIGRyaXZlciwgdW5sb2NrQ2FwYWJpbGl0aWVzKTtcbn07XG5cbmhlbHBlcnMudW5sb2NrV2l0aEhlbHBlckFwcCA9IGFzeW5jIGZ1bmN0aW9uIChhZGIpIHtcbiAgbG9nZ2VyLmluZm8oXCJVbmxvY2tpbmcgc2NyZWVuXCIpO1xuXG4gIC8vIFVubG9jayBzdWNjZWVkIHdpdGggYSBjb3VwbGUgb2YgcmV0cmllcy5cbiAgbGV0IGZpcnN0UnVuID0gdHJ1ZTtcbiAgYXdhaXQgcmV0cnkoMywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIC8vIFRvIHJlZHVjZSBhIHRpbWUgdG8gY2FsbCBhZGIuaXNTY3JlZW5Mb2NrZWQoKSBzaW5jZSBgYWRiIHNoZWxsIGR1bXBzeXMgd2luZG93YCBpcyBlYXN5IHRvIGhhbmcgYWRiIGNvbW1hbmRzXG4gICAgaWYgKGZpcnN0UnVuKSB7XG4gICAgICBmaXJzdFJ1biA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIShhd2FpdCBhZGIuaXNTY3JlZW5Mb2NrZWQoKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYEVycm9yIGluIGlzU2NyZWVuTG9ja2VkOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXFwiYWRiIHNoZWxsIGR1bXBzeXMgd2luZG93XFxcIiBjb21tYW5kIGhhcyB0aW1lZCBvdXQuXCIpO1xuICAgICAgICBsb2dnZXIud2FybihcIlRoZSByZWFzb24gb2YgdGhpcyB0aW1lb3V0IGlzIHRoZSBkZWxheWVkIGFkYiByZXNwb25zZS4gUmVzZXR0aW5nIGFkYiBzZXJ2ZXIgY2FuIGltcHJvdmUgaXQuXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKGBMYXVuY2hpbmcgJHtTRVRUSU5HU19IRUxQRVJfVU5MT0NLX0FDVElWSVRZfWApO1xuICAgIGF3YWl0IGFkYi5zaGVsbChbXG4gICAgICAnYW0nLCAnc3RhcnQnLFxuICAgICAgJy1uJywgYCR7U0VUVElOR1NfSEVMUEVSX1BLR19JRH0vJHtTRVRUSU5HU19IRUxQRVJfVU5MT0NLX0FDVElWSVRZfWAsXG4gICAgICAnLWMnLCAnYW5kcm9pZC5pbnRlbnQuY2F0ZWdvcnkuTEFVTkNIRVInLFxuICAgICAgJy1hJywgJ2FuZHJvaWQuaW50ZW50LmFjdGlvbi5NQUlOJyxcbiAgICAgICctZicsICcweDEwMjAwMDAwJyxcbiAgICBdKTtcbiAgICBhd2FpdCBCLmRlbGF5KDEwMDApO1xuICB9KTtcbn07XG5cbmhlbHBlcnMudW5sb2NrID0gYXN5bmMgZnVuY3Rpb24gKGRyaXZlciwgYWRiLCBjYXBhYmlsaXRpZXMpIHtcbiAgaWYgKCEoYXdhaXQgYWRiLmlzU2NyZWVuTG9ja2VkKCkpKSB7XG4gICAgbG9nZ2VyLmluZm8oXCJTY3JlZW4gYWxyZWFkeSB1bmxvY2tlZCwgZG9pbmcgbm90aGluZ1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb2dnZXIuZGVidWcoXCJTY3JlZW4gaXMgbG9ja2VkLCB0cnlpbmcgdG8gdW5sb2NrXCIpO1xuICBpZiAoXy5pc1VuZGVmaW5lZChjYXBhYmlsaXRpZXMudW5sb2NrVHlwZSkpIHtcbiAgICBsb2dnZXIud2FybihcIlVzaW5nIGFwcCB1bmxvY2ssIHRoaXMgaXMgZ29pbmcgdG8gYmUgZGVwcmVjYXRlZCFcIik7XG4gICAgYXdhaXQgaGVscGVycy51bmxvY2tXaXRoSGVscGVyQXBwKGFkYik7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgaGVscGVycy51bmxvY2tXaXRoVUlBdXRvbWF0aW9uKGRyaXZlciwgYWRiLCB7dW5sb2NrVHlwZTogY2FwYWJpbGl0aWVzLnVubG9ja1R5cGUsIHVubG9ja0tleTogY2FwYWJpbGl0aWVzLnVubG9ja0tleX0pO1xuICAgIGF3YWl0IGhlbHBlcnMudmVyaWZ5VW5sb2NrKGFkYik7XG4gIH1cbn07XG5cbmhlbHBlcnMudmVyaWZ5VW5sb2NrID0gYXN5bmMgZnVuY3Rpb24gKGFkYikge1xuICBhd2FpdCByZXRyeUludGVydmFsKDIsIDEwMDAsIGFzeW5jICgpID0+IHtcbiAgICBpZiAoYXdhaXQgYWRiLmlzU2NyZWVuTG9ja2VkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjcmVlbiBkaWQgbm90IHVubG9jayBzdWNjZXNzZnVsbHksIHJldHJ5aW5nXCIpO1xuICAgIH1cbiAgICBsb2dnZXIuZGVidWcoXCJTY3JlZW4gdW5sb2NrZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9KTtcbn07XG5cbmhlbHBlcnMuaW5pdERldmljZSA9IGFzeW5jIGZ1bmN0aW9uIChhZGIsIG9wdHMpIHtcbiAgaWYgKG9wdHMuc2tpcERldmljZUluaXRpYWxpemF0aW9uKSB7XG4gICAgbG9nZ2VyLmluZm8oYCdza2lwRGV2aWNlSW5pdGlhbGl6YXRpb24nIGlzIHNldC4gU2tpcHBpbmcgZGV2aWNlIGluaXRpYWxpemF0aW9uLmApO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IGFkYi53YWl0Rm9yRGV2aWNlKCk7XG4gICAgLy8gcHVzaFNldHRpbmdzQXBwIHJlcXVpcmVkIGJlZm9yZSBjYWxsaW5nIGVuc3VyZURldmljZUxvY2FsZSBmb3IgQVBJIExldmVsIDI0K1xuICAgIGF3YWl0IGhlbHBlcnMucHVzaFNldHRpbmdzQXBwKGFkYik7XG4gIH1cblxuICBpZiAoIW9wdHMuYXZkKSB7XG4gICAgYXdhaXQgaGVscGVycy5zZXRNb2NrTG9jYXRpb25BcHAoYWRiLCBTRVRUSU5HU19IRUxQRVJfUEtHX0lEKTtcbiAgfVxuXG4gIGlmIChvcHRzLmxhbmd1YWdlIHx8IG9wdHMubG9jYWxlKSB7XG4gICAgYXdhaXQgaGVscGVycy5lbnN1cmVEZXZpY2VMb2NhbGUoYWRiLCBvcHRzLmxhbmd1YWdlLCBvcHRzLmxvY2FsZSwgb3B0cy5sb2NhbGVTY3JpcHQpO1xuICB9XG5cbiAgYXdhaXQgYWRiLnN0YXJ0TG9nY2F0KCk7XG4gIGlmIChvcHRzLnVuaWNvZGVLZXlib2FyZCkge1xuICAgIHJldHVybiBhd2FpdCBoZWxwZXJzLmluaXRVbmljb2RlS2V5Ym9hcmQoYWRiKTtcbiAgfVxufTtcblxuaGVscGVycy5yZW1vdmVOdWxsUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgZm9yIChsZXQga2V5IG9mIF8ua2V5cyhvYmopKSB7XG4gICAgaWYgKF8uaXNOdWxsKG9ialtrZXldKSB8fCBfLmlzVW5kZWZpbmVkKG9ialtrZXldKSkge1xuICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgIH1cbiAgfVxufTtcblxuaGVscGVycy50cnVuY2F0ZURlY2ltYWxzID0gZnVuY3Rpb24gKG51bWJlciwgZGlnaXRzKSB7XG4gIGxldCBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIGRpZ2l0cyksXG4gICAgICBhZGp1c3RlZE51bSA9IG51bWJlciAqIG11bHRpcGxpZXIsXG4gICAgICB0cnVuY2F0ZWROdW0gPSBNYXRoW2FkanVzdGVkTnVtIDwgMCA/ICdjZWlsJyA6ICdmbG9vciddKGFkanVzdGVkTnVtKTtcblxuICByZXR1cm4gdHJ1bmNhdGVkTnVtIC8gbXVsdGlwbGllcjtcbn07XG5cbmhlbHBlcnMuaXNDaHJvbWVCcm93c2VyID0gZnVuY3Rpb24gKGJyb3dzZXIpIHtcbiAgcmV0dXJuIF8uaW5jbHVkZXMoT2JqZWN0LmtleXMoQ0hST01FX0JST1dTRVJfUEFDS0FHRV9BQ1RJVklUWSksIChicm93c2VyIHx8ICcnKS50b0xvd2VyQ2FzZSgpKTtcbn07XG5cbmhlbHBlcnMuZ2V0Q2hyb21lUGtnID0gZnVuY3Rpb24gKGJyb3dzZXIpIHtcbiAgcmV0dXJuIENIUk9NRV9CUk9XU0VSX1BBQ0tBR0VfQUNUSVZJVFlbYnJvd3Nlci50b0xvd2VyQ2FzZSgpXSB8fCBDSFJPTUVfQlJPV1NFUl9QQUNLQUdFX0FDVElWSVRZLmRlZmF1bHQ7XG59O1xuXG5oZWxwZXJzLnJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyA9IGFzeW5jIGZ1bmN0aW9uIChzZXJ2ZXIsIHNlc3Npb25JZCkge1xuICBpZiAoIXNlcnZlciB8fCAhXy5pc0Z1bmN0aW9uKHNlcnZlci5nZXRXZWJTb2NrZXRIYW5kbGVycykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhY3RpdmVIYW5kbGVycyA9IGF3YWl0IHNlcnZlci5nZXRXZWJTb2NrZXRIYW5kbGVycyhzZXNzaW9uSWQpO1xuICBmb3IgKGNvbnN0IHBhdGhuYW1lIG9mIF8ua2V5cyhhY3RpdmVIYW5kbGVycykpIHtcbiAgICBhd2FpdCBzZXJ2ZXIucmVtb3ZlV2ViU29ja2V0SGFuZGxlcihwYXRobmFtZSk7XG4gIH1cbn07XG5cbi8qKlxuICogVGFrZXMgYSBkZXNpcmVkIGNhcGFiaWxpdHkgYW5kIHRyaWVzIHRvIEpTT04ucGFyc2UgaXQgYXMgYW4gYXJyYXksXG4gKiBhbmQgZWl0aGVyIHJldHVybnMgdGhlIHBhcnNlZCBhcnJheSBvciBhIHNpbmdsZXRvbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge2FueX0gY2FwIEEgZGVzaXJlZCBjYXBhYmlsaXR5XG4gKi9cbmhlbHBlcnMucGFyc2VBcnJheSA9IGZ1bmN0aW9uIChjYXApIHtcbiAgbGV0IHBhcnNlZENhcHM7XG4gIHRyeSB7XG4gICAgcGFyc2VkQ2FwcyA9IEpTT04ucGFyc2UoY2FwKTtcbiAgfSBjYXRjaCAoaWduKSB7IH1cblxuICBpZiAoXy5pc0FycmF5KHBhcnNlZENhcHMpKSB7XG4gICAgcmV0dXJuIHBhcnNlZENhcHM7XG4gIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhjYXApKSB7XG4gICAgcmV0dXJuIFtjYXBdO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBtdXN0IHByb3ZpZGUgYSBzdHJpbmcgb3IgSlNPTiBBcnJheTsgcmVjZWl2ZWQgJHtjYXB9YCk7XG59O1xuXG5oZWxwZXJzLnZhbGlkYXRlRGVzaXJlZENhcHMgPSBmdW5jdGlvbiAoY2Fwcykge1xuICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgY2FwYWJpbGl0aWVzIGhhdmUgb25lIG9mIGBhcHBgLCBgYXBwUGFja2FnZWAgb3IgYGJyb3dzZXJgXG4gIGlmICgoIWNhcHMuYnJvd3Nlck5hbWUgfHwgIXRoaXMuaXNDaHJvbWVCcm93c2VyKGNhcHMuYnJvd3Nlck5hbWUpKSAmJiAhY2Fwcy5hcHAgJiYgIWNhcHMuYXBwUGFja2FnZSkge1xuICAgIGxvZ2dlci5lcnJvckFuZFRocm93KCdUaGUgZGVzaXJlZCBjYXBhYmlsaXRpZXMgbXVzdCBpbmNsdWRlIGVpdGhlciBhbiBhcHAsIGFwcFBhY2thZ2Ugb3IgYnJvd3Nlck5hbWUnKTtcbiAgfVxuICBpZiAoY2Fwcy5icm93c2VyTmFtZSkge1xuICAgIGlmIChjYXBzLmFwcCkge1xuICAgICAgLy8gd2FybiBpZiB0aGUgY2FwYWJpbGl0aWVzIGhhdmUgYm90aCBgYXBwYCBhbmQgYGJyb3dzZXIsIGFsdGhvdWdoIHRoaXMgaXMgY29tbW9uIHdpdGggc2VsZW5pdW0gZ3JpZFxuICAgICAgbG9nZ2VyLndhcm4oYFRoZSBkZXNpcmVkIGNhcGFiaWxpdGllcyBzaG91bGQgZ2VuZXJhbGx5IG5vdCBpbmNsdWRlIGJvdGggYW4gJ2FwcCcgYW5kIGEgJ2Jyb3dzZXJOYW1lJ2ApO1xuICAgIH1cbiAgICBpZiAoY2Fwcy5hcHBQYWNrYWdlKSB7XG4gICAgICBsb2dnZXIuZXJyb3JBbmRUaHJvdyhgVGhlIGRlc2lyZWQgc2hvdWxkIG5vdCBpbmNsdWRlIGJvdGggb2YgYW4gJ2FwcFBhY2thZ2UnIGFuZCBhICdicm93c2VyTmFtZSdgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmhlbHBlcnMuYm9vdHN0cmFwID0gQm9vdHN0cmFwO1xuaGVscGVycy51bmxvY2tlciA9IHVubG9ja2VyO1xuXG5leHBvcnQgeyBoZWxwZXJzIH07XG5leHBvcnQgZGVmYXVsdCBoZWxwZXJzO1xuIl0sImZpbGUiOiJsaWIvYW5kcm9pZC1oZWxwZXJzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
