"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.NETWORK_KEYS = exports.BATTERY_KEYS = exports.MEMORY_KEYS = exports.CPU_KEYS = exports.SUPPORTED_PERFORMANCE_DATA_TYPES = exports.helpers = exports.commands = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _asyncbox = require("asyncbox");

let commands = {},
    helpers = {},
    extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const NETWORK_KEYS = [['bucketStart', 'activeTime', 'rxBytes', 'rxPackets', 'txBytes', 'txPackets', 'operations', 'bucketDuration'], ['st', 'activeTime', 'rb', 'rp', 'tb', 'tp', 'op', 'bucketDuration']];
exports.NETWORK_KEYS = NETWORK_KEYS;
const CPU_KEYS = ['user', 'kernel'];
exports.CPU_KEYS = CPU_KEYS;
const BATTERY_KEYS = ['power'];
exports.BATTERY_KEYS = BATTERY_KEYS;
const MEMORY_KEYS = ['totalPrivateDirty', 'nativePrivateDirty', 'dalvikPrivateDirty', 'eglPrivateDirty', 'glPrivateDirty', 'totalPss', 'nativePss', 'dalvikPss', 'eglPss', 'glPss', 'nativeHeapAllocatedSize', 'nativeHeapSize'];
exports.MEMORY_KEYS = MEMORY_KEYS;
const SUPPORTED_PERFORMANCE_DATA_TYPES = {
  cpuinfo: 'the amount of cpu by user and kernel process - cpu information for applications on real devices and simulators',
  memoryinfo: 'the amount of memory used by the process - memory information for applications on real devices and simulators',
  batteryinfo: 'the remaining battery power - battery power information for applications on real devices and simulators',
  networkinfo: 'the network statistics - network rx/tx information for applications on real devices and simulators'
};
exports.SUPPORTED_PERFORMANCE_DATA_TYPES = SUPPORTED_PERFORMANCE_DATA_TYPES;
const RETRY_PAUSE = 1000;

commands.getPerformanceDataTypes = function () {
  return _lodash.default.keys(SUPPORTED_PERFORMANCE_DATA_TYPES);
};

commands.getPerformanceData = async function (packageName, dataType, dataReadTimeout = 2) {
  let data;

  switch (dataType) {
    case 'batteryinfo':
      data = await this.getBatteryInfo(dataReadTimeout);
      break;

    case 'cpuinfo':
      data = await this.getCPUInfo(packageName, dataReadTimeout);
      break;

    case 'memoryinfo':
      data = await this.getMemoryInfo(packageName, dataReadTimeout);
      break;

    case 'networkinfo':
      data = await this.getNetworkTrafficInfo(dataReadTimeout);
      break;

    default:
      throw new Error(`No performance data of type '${dataType}' found.`);
  }

  return data;
};

helpers.getCPUInfo = async function (packageName, dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    const cmd = ['dumpsys', 'cpuinfo', '|', 'grep', `'${packageName}'`];
    const data = await this.adb.shell(cmd);

    if (_lodash.default.isEmpty(data)) {
      throw new Error('No data from dumpsys');
    }

    const userMatch = /([\d.]+)%\s+user/.exec(data);
    const kernelMatch = /([\d.]+)%\s+kernel/.exec(data);

    if (!userMatch || !kernelMatch) {
      throw new Error(`Unable to parse cpu data: '${data}'`);
    }

    return [_lodash.default.clone(CPU_KEYS), [userMatch[1], kernelMatch[1]]];
  });
};

helpers.getBatteryInfo = async function (dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    let cmd = ['dumpsys', 'battery', '|', 'grep', 'level'];
    let data = await this.adb.shell(cmd);
    if (!data) throw new Error('No data from dumpsys');
    let power = parseInt((data.split(':')[1] || '').trim(), 10);

    if (!Number.isNaN(power)) {
      return [_lodash.default.clone(BATTERY_KEYS), [power.toString()]];
    } else {
      throw new Error(`Unable to parse battery data: '${data}'`);
    }
  });
};

helpers.getMemoryInfo = async function (packageName, dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    let cmd = ['dumpsys', 'meminfo', `'${packageName}'`, '|', 'grep', '-E', "'Native|Dalvik|EGL|GL|TOTAL'"];
    let data = await this.adb.shell(cmd);
    if (!data) throw new Error('No data from dumpsys');
    let totalPrivateDirty, totalPss, nativePrivateDirty, nativePss, nativeHeapSize, nativeHeapAllocatedSize, dalvikPrivateDirty, dalvikPss, eglPrivateDirty, eglPss, glPrivateDirty, glPss;
    let apilevel = await this.adb.getApiLevel();

    for (let line of data.split('\n')) {
      let entries = line.trim().split(' ').filter(Boolean);

      if (apilevel > 18) {
        let type = entries[0];
        let subType = entries[1];

        if (type === 'Native' && subType === 'Heap') {
          nativePss = entries[2];
          nativePrivateDirty = entries[3];
          nativeHeapSize = entries[6];
          nativeHeapAllocatedSize = entries[7];
        } else if (type === 'Dalvik' && subType === 'Heap') {
          dalvikPss = entries[2];
          dalvikPrivateDirty = entries[3];
        } else if (type === 'EGL' && subType === 'mtrack') {
          eglPss = entries[2];
          eglPrivateDirty = entries[3];
        } else if (type === 'GL' && subType === 'mtrack') {
          glPss = entries[2];
          glPrivateDirty = entries[3];
        } else if (type === 'TOTAL' && entries.length === 8) {
          totalPss = entries[1];
          totalPrivateDirty = entries[2];
        }
      } else {
        let type = entries[0];

        if (type === 'Native') {
          nativePss = entries[1];
          nativePrivateDirty = entries[3];
          nativeHeapSize = entries[4];
          nativeHeapAllocatedSize = entries[5];
        } else if (type === 'Dalvik') {
          dalvikPss = entries[1];
          dalvikPrivateDirty = entries[3];
        } else if (type === 'EGL') {
          eglPss = entries[1];
          eglPrivateDirty = entries[3];
        } else if (type === 'GL') {
          glPss = entries[1];
          glPrivateDirty = entries[3];
        } else if (type === 'TOTAL') {
          totalPss = entries[1];
          totalPrivateDirty = entries[3];
        }
      }
    }

    if (totalPrivateDirty && totalPrivateDirty !== 'nodex') {
      let headers = _lodash.default.clone(MEMORY_KEYS);

      let data = [totalPrivateDirty, nativePrivateDirty, dalvikPrivateDirty, eglPrivateDirty, glPrivateDirty, totalPss, nativePss, dalvikPss, eglPss, glPss, nativeHeapAllocatedSize, nativeHeapSize];
      return [headers, data];
    } else {
      throw new Error(`Unable to parse memory data: '${data}'`);
    }
  });
};

helpers.getNetworkTrafficInfo = async function (dataReadTimeout = 2) {
  return await (0, _asyncbox.retryInterval)(dataReadTimeout, RETRY_PAUSE, async () => {
    let returnValue = [];
    let bucketDuration, bucketStart, activeTime, rxBytes, rxPackets, txBytes, txPackets, operations;
    let cmd = ['dumpsys', 'netstats'];
    let data = await this.adb.shell(cmd);
    if (!data) throw new Error('No data from dumpsys');
    let index = 0;
    let fromXtstats = data.indexOf("Xt stats:");
    let start = data.indexOf("Pending bytes:", fromXtstats);
    let delimiter = data.indexOf(":", start + 1);
    let end = data.indexOf("\n", delimiter + 1);
    let pendingBytes = data.substring(delimiter + 1, end).trim();

    if (end > delimiter) {
      start = data.indexOf("bucketDuration", end + 1);
      delimiter = data.indexOf("=", start + 1);
      end = data.indexOf("\n", delimiter + 1);
      bucketDuration = data.substring(delimiter + 1, end).trim();
    }

    if (start >= 0) {
      data = data.substring(end + 1, data.length);
      let arrayList = data.split("\n");

      if (arrayList.length > 0) {
        start = -1;

        for (let j = 0; j < NETWORK_KEYS.length; ++j) {
          start = arrayList[0].indexOf(NETWORK_KEYS[j][0]);

          if (start >= 0) {
            index = j;
            returnValue[0] = [];

            for (let k = 0; k < NETWORK_KEYS[j].length; ++k) {
              returnValue[0][k] = NETWORK_KEYS[j][k];
            }

            break;
          }
        }

        let returnIndex = 1;

        for (let i = 0; i < arrayList.length; i++) {
          data = arrayList[i];
          start = data.indexOf(NETWORK_KEYS[index][0]);

          if (start >= 0) {
            delimiter = data.indexOf("=", start + 1);
            end = data.indexOf(" ", delimiter + 1);
            bucketStart = data.substring(delimiter + 1, end).trim();

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][1], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf("=", start + 1);
                end = data.indexOf(" ", delimiter + 1);
                activeTime = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][2], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf("=", start + 1);
                end = data.indexOf(" ", delimiter + 1);
                rxBytes = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][3], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf("=", start + 1);
                end = data.indexOf(" ", delimiter + 1);
                rxPackets = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][4], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf("=", start + 1);
                end = data.indexOf(" ", delimiter + 1);
                txBytes = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][5], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf("=", start + 1);
                end = data.indexOf(" ", delimiter + 1);
                txPackets = data.substring(delimiter + 1, end).trim();
              }
            }

            if (end > delimiter) {
              start = data.indexOf(NETWORK_KEYS[index][6], end + 1);

              if (start >= 0) {
                delimiter = data.indexOf("=", start + 1);
                end = data.length;
                operations = data.substring(delimiter + 1, end).trim();
              }
            }

            returnValue[returnIndex++] = [bucketStart, activeTime, rxBytes, rxPackets, txBytes, txPackets, operations, bucketDuration];
          }
        }
      }
    }

    if (!_lodash.default.isEqual(pendingBytes, "") && !_lodash.default.isUndefined(pendingBytes) && !_lodash.default.isEqual(pendingBytes, "nodex")) {
      return returnValue;
    } else {
      throw new Error(`Unable to parse network traffic data: '${data}'`);
    }
  });
};

Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9wZXJmb3JtYW5jZS5qcyJdLCJuYW1lcyI6WyJjb21tYW5kcyIsImhlbHBlcnMiLCJleHRlbnNpb25zIiwiTkVUV09SS19LRVlTIiwiQ1BVX0tFWVMiLCJCQVRURVJZX0tFWVMiLCJNRU1PUllfS0VZUyIsIlNVUFBPUlRFRF9QRVJGT1JNQU5DRV9EQVRBX1RZUEVTIiwiY3B1aW5mbyIsIm1lbW9yeWluZm8iLCJiYXR0ZXJ5aW5mbyIsIm5ldHdvcmtpbmZvIiwiUkVUUllfUEFVU0UiLCJnZXRQZXJmb3JtYW5jZURhdGFUeXBlcyIsIl8iLCJrZXlzIiwiZ2V0UGVyZm9ybWFuY2VEYXRhIiwicGFja2FnZU5hbWUiLCJkYXRhVHlwZSIsImRhdGFSZWFkVGltZW91dCIsImRhdGEiLCJnZXRCYXR0ZXJ5SW5mbyIsImdldENQVUluZm8iLCJnZXRNZW1vcnlJbmZvIiwiZ2V0TmV0d29ya1RyYWZmaWNJbmZvIiwiRXJyb3IiLCJjbWQiLCJhZGIiLCJzaGVsbCIsImlzRW1wdHkiLCJ1c2VyTWF0Y2giLCJleGVjIiwia2VybmVsTWF0Y2giLCJjbG9uZSIsInBvd2VyIiwicGFyc2VJbnQiLCJzcGxpdCIsInRyaW0iLCJOdW1iZXIiLCJpc05hTiIsInRvU3RyaW5nIiwidG90YWxQcml2YXRlRGlydHkiLCJ0b3RhbFBzcyIsIm5hdGl2ZVByaXZhdGVEaXJ0eSIsIm5hdGl2ZVBzcyIsIm5hdGl2ZUhlYXBTaXplIiwibmF0aXZlSGVhcEFsbG9jYXRlZFNpemUiLCJkYWx2aWtQcml2YXRlRGlydHkiLCJkYWx2aWtQc3MiLCJlZ2xQcml2YXRlRGlydHkiLCJlZ2xQc3MiLCJnbFByaXZhdGVEaXJ0eSIsImdsUHNzIiwiYXBpbGV2ZWwiLCJnZXRBcGlMZXZlbCIsImxpbmUiLCJlbnRyaWVzIiwiZmlsdGVyIiwiQm9vbGVhbiIsInR5cGUiLCJzdWJUeXBlIiwibGVuZ3RoIiwiaGVhZGVycyIsInJldHVyblZhbHVlIiwiYnVja2V0RHVyYXRpb24iLCJidWNrZXRTdGFydCIsImFjdGl2ZVRpbWUiLCJyeEJ5dGVzIiwicnhQYWNrZXRzIiwidHhCeXRlcyIsInR4UGFja2V0cyIsIm9wZXJhdGlvbnMiLCJpbmRleCIsImZyb21YdHN0YXRzIiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsaW1pdGVyIiwiZW5kIiwicGVuZGluZ0J5dGVzIiwic3Vic3RyaW5nIiwiYXJyYXlMaXN0IiwiaiIsImsiLCJyZXR1cm5JbmRleCIsImkiLCJpc0VxdWFsIiwiaXNVbmRlZmluZWQiLCJPYmplY3QiLCJhc3NpZ24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBR0EsSUFBSUEsUUFBUSxHQUFHLEVBQWY7QUFBQSxJQUFtQkMsT0FBTyxHQUFHLEVBQTdCO0FBQUEsSUFBaUNDLFVBQVUsR0FBRyxFQUE5Qzs7O0FBRUEsTUFBTUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxhQUFELEVBQWdCLFlBQWhCLEVBQThCLFNBQTlCLEVBQXlDLFdBQXpDLEVBQXNELFNBQXRELEVBQWlFLFdBQWpFLEVBQThFLFlBQTlFLEVBQTRGLGdCQUE1RixDQUFELEVBQWdILENBQUMsSUFBRCxFQUFPLFlBQVAsRUFBcUIsSUFBckIsRUFBMkIsSUFBM0IsRUFBaUMsSUFBakMsRUFBdUMsSUFBdkMsRUFBNkMsSUFBN0MsRUFBbUQsZ0JBQW5ELENBQWhILENBQXJCOztBQUNBLE1BQU1DLFFBQVEsR0FBRyxDQUFDLE1BQUQsRUFBUyxRQUFULENBQWpCOztBQUNBLE1BQU1DLFlBQVksR0FBRyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTUMsV0FBVyxHQUFHLENBQUMsbUJBQUQsRUFBc0Isb0JBQXRCLEVBQTRDLG9CQUE1QyxFQUFrRSxpQkFBbEUsRUFBcUYsZ0JBQXJGLEVBQXVHLFVBQXZHLEVBQW1ILFdBQW5ILEVBQWdJLFdBQWhJLEVBQTZJLFFBQTdJLEVBQXVKLE9BQXZKLEVBQWdLLHlCQUFoSyxFQUEyTCxnQkFBM0wsQ0FBcEI7O0FBRUEsTUFBTUMsZ0NBQWdDLEdBQUc7QUFDdkNDLEVBQUFBLE9B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TCxJQUFLLEdBQXpELENBQU47QUFDRDtBQUNGLEdBckpZLENBQWI7QUFzSkQsQ0F2SkQ7O0FBeUpBbUUsTUFBTSxDQUFDQyxNQUFQLENBQWN0RixVQUFkLEVBQTBCRixRQUExQixFQUFvQ0MsT0FBcEM7ZUFLZUMsVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyByZXRyeUludGVydmFsIH0gZnJvbSAnYXN5bmNib3gnO1xuXG5cbmxldCBjb21tYW5kcyA9IHt9LCBoZWxwZXJzID0ge30sIGV4dGVuc2lvbnMgPSB7fTtcblxuY29uc3QgTkVUV09SS19LRVlTID0gW1snYnVja2V0U3RhcnQnLCAnYWN0aXZlVGltZScsICdyeEJ5dGVzJywgJ3J4UGFja2V0cycsICd0eEJ5dGVzJywgJ3R4UGFja2V0cycsICdvcGVyYXRpb25zJywgJ2J1Y2tldER1cmF0aW9uJ10sIFsnc3QnLCAnYWN0aXZlVGltZScsICdyYicsICdycCcsICd0YicsICd0cCcsICdvcCcsICdidWNrZXREdXJhdGlvbiddXTtcbmNvbnN0IENQVV9LRVlTID0gWyd1c2VyJywgJ2tlcm5lbCddO1xuY29uc3QgQkFUVEVSWV9LRVlTID0gWydwb3dlciddO1xuY29uc3QgTUVNT1JZX0tFWVMgPSBbJ3RvdGFsUHJpdmF0ZURpcnR5JywgJ25hdGl2ZVByaXZhdGVEaXJ0eScsICdkYWx2aWtQcml2YXRlRGlydHknLCAnZWdsUHJpdmF0ZURpcnR5JywgJ2dsUHJpdmF0ZURpcnR5JywgJ3RvdGFsUHNzJywgJ25hdGl2ZVBzcycsICdkYWx2aWtQc3MnLCAnZWdsUHNzJywgJ2dsUHNzJywgJ25hdGl2ZUhlYXBBbGxvY2F0ZWRTaXplJywgJ25hdGl2ZUhlYXBTaXplJ107XG5cbmNvbnN0IFNVUFBPUlRFRF9QRVJGT1JNQU5DRV9EQVRBX1RZUEVTID0ge1xuICBjcHVpbmZvOiAndGhlIGFtb3VudCBvZiBjcHUgYnkgdXNlciBhbmQga2VybmVsIHByb2Nlc3MgLSBjcHUgaW5mb3JtYXRpb24gZm9yIGFwcGxpY2F0aW9ucyBvbiByZWFsIGRldmljZXMgYW5kIHNpbXVsYXRvcnMnLFxuICBtZW1vcnlpbmZvOiAndGhlIGFtb3VudCBvZiBtZW1vcnkgdXNlZCBieSB0aGUgcHJvY2VzcyAtIG1lbW9yeSBpbmZvcm1hdGlvbiBmb3IgYXBwbGljYXRpb25zIG9uIHJlYWwgZGV2aWNlcyBhbmQgc2ltdWxhdG9ycycsXG4gIGJhdHRlcnlpbmZvOiAndGhlIHJlbWFpbmluZyBiYXR0ZXJ5IHBvd2VyIC0gYmF0dGVyeSBwb3dlciBpbmZvcm1hdGlvbiBmb3IgYXBwbGljYXRpb25zIG9uIHJlYWwgZGV2aWNlcyBhbmQgc2ltdWxhdG9ycycsXG4gIG5ldHdvcmtpbmZvOiAndGhlIG5ldHdvcmsgc3RhdGlzdGljcyAtIG5ldHdvcmsgcngvdHggaW5mb3JtYXRpb24gZm9yIGFwcGxpY2F0aW9ucyBvbiByZWFsIGRldmljZXMgYW5kIHNpbXVsYXRvcnMnXG59O1xuXG5jb25zdCBSRVRSWV9QQVVTRSA9IDEwMDA7XG5cbi8vXG4vLyByZXR1cm5zIHRoZSBpbmZvcm1hdGlvbiB0eXBlIG9mIHRoZSBzeXN0ZW0gc3RhdGUgd2hpY2ggaXMgc3VwcG9ydGVkIHRvIHJlYWQgYXMgbGlrZSBjcHUsIG1lbW9yeSwgbmV0d29yayB0cmFmZmljLCBhbmQgYmF0dGVyeS5cbi8vIG91dHB1dCAtIGFycmF5IGxpa2UgYmVsb3dcbi8vW2NwdWluZm8sIGJhdHRlcnlpbmZvLCBuZXR3b3JraW5mbywgbWVtb3J5aW5mb11cbi8vXG5jb21tYW5kcy5nZXRQZXJmb3JtYW5jZURhdGFUeXBlcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIF8ua2V5cyhTVVBQT1JURURfUEVSRk9STUFOQ0VfREFUQV9UWVBFUyk7XG59O1xuXG4vLyByZXR1cm5zIHRoZSBpbmZvcm1hdGlvbiB0eXBlIG9mIHRoZSBzeXN0ZW0gc3RhdGUgd2hpY2ggaXMgc3VwcG9ydGVkIHRvIHJlYWQgYXMgbGlrZSBjcHUsIG1lbW9yeSwgbmV0d29yayB0cmFmZmljLCBhbmQgYmF0dGVyeS5cbi8vaW5wdXQgLSAocGFja2FnZU5hbWUpIHRoZSBwYWNrYWdlIG5hbWUgb2YgdGhlIGFwcGxpY2F0aW9uXG4vLyAgICAgICAgKGRhdGFUeXBlKSB0aGUgdHlwZSBvZiBzeXN0ZW0gc3RhdGUgd2hpY2ggd2FudHMgdG8gcmVhZC4gSXQgc2hvdWxkIGJlIG9uZSBvZiB0aGUga2V5cyBvZiB0aGUgU1VQUE9SVEVEX1BFUkZPUk1BTkNFX0RBVEFfVFlQRVNcbi8vICAgICAgICAoZGF0YVJlYWRUaW1lb3V0KSB0aGUgbnVtYmVyIG9mIGF0dGVtcHRzIHRvIHJlYWRcbi8vIG91dHB1dCAtIHRhYmxlIG9mIHRoZSBwZXJmb3JtYW5jZSBkYXRhLCBUaGUgZmlyc3QgbGluZSBvZiB0aGUgdGFibGUgcmVwcmVzZW50cyB0aGUgdHlwZSBvZiBkYXRhLiBUaGUgcmVtYWluaW5nIGxpbmVzIHJlcHJlc2VudCB0aGUgdmFsdWVzIG9mIHRoZSBkYXRhLlxuLy9cbi8vIGluIGNhc2Ugb2YgYmF0dGVyeSBpbmZvIDogW1twb3dlcl0sIFsyM11dXG4vLyBpbiBjYXNlIG9mIG1lbW9yeSBpbmZvIDogIFtbdG90YWxQcml2YXRlRGlydHksIG5hdGl2ZVByaXZhdGVEaXJ0eSwgZGFsdmlrUHJpdmF0ZURpcnR5LCBlZ2xQcml2YXRlRGlydHksIGdsUHJpdmF0ZURpcnR5LCB0b3RhbFBzcywgbmF0aXZlUHNzLCBkYWx2aWtQc3MsIGVnbFBzcywgZ2xQc3MsIG5hdGl2ZUhlYXBBbGxvY2F0ZWRTaXplLCBuYXRpdmVIZWFwU2l6ZV0sIFsxODM2MCwgODI5NiwgNjEzMiwgbnVsbCwgbnVsbCwgNDI1ODgsIDg0MDYsIDcwMjQsIG51bGwsIG51bGwsIDI2NTE5LCAxMDM0NF1dXG4vLyBpbiBjYXNlIG9mIG5ldHdvcmsgaW5mbyA6IFtbYnVja2V0U3RhcnQsIGFjdGl2ZVRpbWUsIHJ4Qnl0ZXMsIHJ4UGFja2V0cywgdHhCeXRlcywgdHhQYWNrZXRzLCBvcGVyYXRpb25zLCBidWNrZXREdXJhdGlvbixdLCBbMTQ3ODA5MTYwMDAwMCwgbnVsbCwgMTA5OTA3NSwgNjEwOTQ3LCA5MjgsIDExNDM2MiwgNzY5LCAwLCAzNjAwMDAwXSwgWzE0NzgwOTUyMDAwMDAsIG51bGwsIDEzMDYzMDAsIDQwNTk5NywgNTA5LCA0NjM1OSwgMzcwLCAwLCAzNjAwMDAwXV1cbi8vIGluIGNhc2Ugb2YgbmV0d29yayBpbmZvIDogW1tzdCwgYWN0aXZlVGltZSwgcmIsIHJwLCB0YiwgdHAsIG9wLCBidWNrZXREdXJhdGlvbl0sIFsxNDc4MDg4MDAwLCBudWxsLCBudWxsLCAzMjExNTI5NiwgMzQyOTEsIDI5NTY4MDUsIDI1NzA1LCAwLCAzNjAwXSwgWzE0NzgwOTE2MDAsIG51bGwsIG51bGwsIDI3MTQ2ODMsIDExODIxLCAxNDIwNTY0LCAxMjY1MCwgMCwgMzYwMF0sIFsxNDc4MDk1MjAwLCBudWxsLCBudWxsLCAxMDA3OTIxMywgMTk5NjIsIDI0ODc3MDUsIDIwMDE1LCAwLCAzNjAwXSwgWzE0NzgwOTg4MDAsIG51bGwsIG51bGwsIDQ0NDQ0MzMsIDEwMjI3LCAxNDMwMzU2LCAxMDQ5MywgMCwgMzYwMF1dXG4vLyBpbiBjYXNlIG9mIGNwdSBpbmZvIDogW1t1c2VyLCBrZXJuZWxdLCBbMC45LCAxLjNdXVxuLy9cbmNvbW1hbmRzLmdldFBlcmZvcm1hbmNlRGF0YSA9IGFzeW5jIGZ1bmN0aW9uIChwYWNrYWdlTmFtZSwgZGF0YVR5cGUsIGRhdGFSZWFkVGltZW91dCA9IDIpIHtcbiAgbGV0IGRhdGE7XG4gIHN3aXRjaCAoZGF0YVR5cGUpIHtcbiAgICBjYXNlICdiYXR0ZXJ5aW5mbyc6XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5nZXRCYXR0ZXJ5SW5mbyhkYXRhUmVhZFRpbWVvdXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnY3B1aW5mbyc6XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5nZXRDUFVJbmZvKHBhY2thZ2VOYW1lLCBkYXRhUmVhZFRpbWVvdXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbWVtb3J5aW5mbyc6XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5nZXRNZW1vcnlJbmZvKHBhY2thZ2VOYW1lLCBkYXRhUmVhZFRpbWVvdXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbmV0d29ya2luZm8nOlxuICAgICAgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0TmV0d29ya1RyYWZmaWNJbmZvKGRhdGFSZWFkVGltZW91dCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBwZXJmb3JtYW5jZSBkYXRhIG9mIHR5cGUgJyR7ZGF0YVR5cGV9JyBmb3VuZC5gKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5cbmhlbHBlcnMuZ2V0Q1BVSW5mbyA9IGFzeW5jIGZ1bmN0aW9uIChwYWNrYWdlTmFtZSwgZGF0YVJlYWRUaW1lb3V0ID0gMikge1xuICAvLyBUT0RPOiBmaWd1cmUgb3V0IHdoeSB0aGlzIGlzXG4gIC8vIHNvbWV0aW1lcywgdGhlIGZ1bmN0aW9uIG9mICdhZGIuc2hlbGwnIGZhaWxzLiB3aGVuIEkgdGVzdGVkIHRoaXMgZnVuY3Rpb24gb24gdGhlIHRhcmdldCBvZiAnR2FsYXh5IE5vdGU1JyxcbiAgLy8gYWRiLnNoZWxsKGR1bXBzeXMgY3B1aW5mbykgcmV0dXJucyBjcHUgZGF0YXMgZm9yIG90aGVyIGFwcGxpY2F0aW9uIHBhY2thZ2VzLCBidXQgSSBjYW4ndCBmaW5kIHRoZSBkYXRhIGZvciBwYWNrYWdlTmFtZS5cbiAgLy8gSXQgdXN1YWxseSBmYWlscyAzMCB0aW1lcyBhbmQgc3VjY2VzcyBmb3IgdGhlIG5leHQgdGltZSxcbiAgLy8gU2luY2UgdGhlbiwgaGUgaGFzIGNvbnRpbnVlZCB0byBzdWNjZWVkLlxuICByZXR1cm4gYXdhaXQgcmV0cnlJbnRlcnZhbChkYXRhUmVhZFRpbWVvdXQsIFJFVFJZX1BBVVNFLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY21kID0gWydkdW1wc3lzJywgJ2NwdWluZm8nLCAnfCcsICdncmVwJywgYCcke3BhY2thZ2VOYW1lfSdgXTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5hZGIuc2hlbGwoY21kKTtcbiAgICBpZiAoXy5pc0VtcHR5KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRhdGEgZnJvbSBkdW1wc3lzJyk7XG4gICAgfVxuICAgIC8vIGBkYXRhYCB3aWxsIGJlIHNvbWV0aGluZyBsaWtlXG4gICAgLy8gICAgKzAlIDIyMDkvaW8uYXBwaXVtLmFuZHJvaWQuYXBpczogMC4xJSB1c2VyICsgMC4yJSBrZXJuZWxcbiAgICBjb25zdCB1c2VyTWF0Y2ggPSAvKFtcXGQuXSspJVxccyt1c2VyLy5leGVjKGRhdGEpO1xuICAgIGNvbnN0IGtlcm5lbE1hdGNoID0gLyhbXFxkLl0rKSVcXHMra2VybmVsLy5leGVjKGRhdGEpO1xuICAgIGlmICghdXNlck1hdGNoIHx8ICFrZXJuZWxNYXRjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcGFyc2UgY3B1IGRhdGE6ICcke2RhdGF9J2ApO1xuICAgIH1cbiAgICByZXR1cm4gW18uY2xvbmUoQ1BVX0tFWVMpLCBbdXNlck1hdGNoWzFdLCBrZXJuZWxNYXRjaFsxXV1dO1xuICB9KTtcbn07XG5cbmhlbHBlcnMuZ2V0QmF0dGVyeUluZm8gPSBhc3luYyBmdW5jdGlvbiAoZGF0YVJlYWRUaW1lb3V0ID0gMikge1xuICByZXR1cm4gYXdhaXQgcmV0cnlJbnRlcnZhbChkYXRhUmVhZFRpbWVvdXQsIFJFVFJZX1BBVVNFLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGNtZCA9IFsnZHVtcHN5cycsICdiYXR0ZXJ5JywgJ3wnLCAnZ3JlcCcsICdsZXZlbCddO1xuICAgIGxldCBkYXRhID0gYXdhaXQgdGhpcy5hZGIuc2hlbGwoY21kKTtcbiAgICBpZiAoIWRhdGEpIHRocm93IG5ldyBFcnJvcignTm8gZGF0YSBmcm9tIGR1bXBzeXMnKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG5cbiAgICBsZXQgcG93ZXIgPSBwYXJzZUludCgoZGF0YS5zcGxpdCgnOicpWzFdIHx8ICcnKS50cmltKCksIDEwKTtcblxuICAgIGlmICghTnVtYmVyLmlzTmFOKHBvd2VyKSkge1xuICAgICAgcmV0dXJuIFtfLmNsb25lKEJBVFRFUllfS0VZUyksIFtwb3dlci50b1N0cmluZygpXV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHBhcnNlIGJhdHRlcnkgZGF0YTogJyR7ZGF0YX0nYCk7XG4gICAgfVxuICB9KTtcblxufTtcblxuaGVscGVycy5nZXRNZW1vcnlJbmZvID0gYXN5bmMgZnVuY3Rpb24gKHBhY2thZ2VOYW1lLCBkYXRhUmVhZFRpbWVvdXQgPSAyKSB7XG4gIHJldHVybiBhd2FpdCByZXRyeUludGVydmFsKGRhdGFSZWFkVGltZW91dCwgUkVUUllfUEFVU0UsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgY21kID0gWydkdW1wc3lzJywgJ21lbWluZm8nLCBgJyR7cGFja2FnZU5hbWV9J2AsICd8JywgJ2dyZXAnLCAnLUUnLCBcIidOYXRpdmV8RGFsdmlrfEVHTHxHTHxUT1RBTCdcIl07XG4gICAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmFkYi5zaGVsbChjbWQpO1xuICAgIGlmICghZGF0YSkgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIGZyb20gZHVtcHN5cycpOyAvL2VzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICAgIGxldCB0b3RhbFByaXZhdGVEaXJ0eSwgdG90YWxQc3MsXG4gICAgICAgIG5hdGl2ZVByaXZhdGVEaXJ0eSwgbmF0aXZlUHNzLCBuYXRpdmVIZWFwU2l6ZSwgbmF0aXZlSGVhcEFsbG9jYXRlZFNpemUsXG4gICAgICAgIGRhbHZpa1ByaXZhdGVEaXJ0eSwgZGFsdmlrUHNzLFxuICAgICAgICBlZ2xQcml2YXRlRGlydHksIGVnbFBzcyxcbiAgICAgICAgZ2xQcml2YXRlRGlydHksIGdsUHNzO1xuICAgIGxldCBhcGlsZXZlbCA9IGF3YWl0IHRoaXMuYWRiLmdldEFwaUxldmVsKCk7XG4gICAgZm9yIChsZXQgbGluZSBvZiBkYXRhLnNwbGl0KCdcXG4nKSkge1xuICAgICAgbGV0IGVudHJpZXMgPSBsaW5lLnRyaW0oKS5zcGxpdCgnICcpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIC8vIGVudHJpZXMgd2lsbCBoYXZlIHRoZSB2YWx1ZXNcbiAgICAgIC8vICAgWyc8U3lzdGVtIFR5cGU+JywgJzxNZW1vcnkgVHlwZT4nLCA8cHNzIHRvdGFsPiwgPHByaXZhdGUgZGlydHk+LCA8cHJpdmF0ZSBjbGVhbj4sIDxzd2FwUHNzIGRpcnR5PiwgPGhlYXAgc2l6ZT4sIDxoZWFwIGFsbG9jPiwgPGhlYXAgZnJlZT5dXG4gICAgICAvLyBleGNlcHQgJ1RPVEFMJywgd2hpY2ggc2tpcHMgdGhlIHNlY29uZCB0eXBlIG5hbWVcbiAgICAgIC8vXG4gICAgICAvLyBhbmQgb24gQVBJIGxldmVsIDE4IGFuZCBiZWxvd1xuICAgICAgLy8gICBbJzxTeXN0ZW0gVHlwZScsICc8cHBzPicsICc8c2hhcmVkIGRpcnR5PicsICc8cHJpdmF0ZSBkaXJ0eT4nLCAnPGhlYXAgc2l6ZT4nLCAnPGhlYXAgYWxsb2M+JywgJzxoZWFwIGZyZWU+J11cblxuICAgICAgaWYgKGFwaWxldmVsID4gMTgpIHtcbiAgICAgICAgbGV0IHR5cGUgPSBlbnRyaWVzWzBdO1xuICAgICAgICBsZXQgc3ViVHlwZSA9IGVudHJpZXNbMV07XG4gICAgICAgIGlmICh0eXBlID09PSAnTmF0aXZlJyAmJiBzdWJUeXBlID09PSAnSGVhcCcpIHtcbiAgICAgICAgICAvLyBuYXRpdmUgaGVhcFxuICAgICAgICAgIG5hdGl2ZVBzcyA9IGVudHJpZXNbMl07XG4gICAgICAgICAgbmF0aXZlUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgICBuYXRpdmVIZWFwU2l6ZSA9IGVudHJpZXNbNl07XG4gICAgICAgICAgbmF0aXZlSGVhcEFsbG9jYXRlZFNpemUgPSBlbnRyaWVzWzddO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdEYWx2aWsnICYmIHN1YlR5cGUgPT09ICdIZWFwJykge1xuICAgICAgICAgIC8vIGRhbHZpayBoZWFwXG4gICAgICAgICAgZGFsdmlrUHNzID0gZW50cmllc1syXTtcbiAgICAgICAgICBkYWx2aWtQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdFR0wnICYmIHN1YlR5cGUgPT09ICdtdHJhY2snKSB7XG4gICAgICAgICAgLy8gZWdsXG4gICAgICAgICAgZWdsUHNzID0gZW50cmllc1syXTtcbiAgICAgICAgICBlZ2xQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdHTCcgJiYgc3ViVHlwZSA9PT0gJ210cmFjaycpIHtcbiAgICAgICAgICAvLyBnbFxuICAgICAgICAgIGdsUHNzID0gZW50cmllc1syXTtcbiAgICAgICAgICBnbFByaXZhdGVEaXJ0eSA9IGVudHJpZXNbM107XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RPVEFMJyAmJiBlbnRyaWVzLmxlbmd0aCA9PT0gOCkge1xuICAgICAgICAgIC8vIHRoZXJlIGFyZSB0d28gdG90YWxzLCBhbmQgd2Ugb25seSB3YW50IHRoZSBmdWxsIGxpc3RpbmcsIHdoaWNoIGhhcyA4IGVudHJpZXNcbiAgICAgICAgICB0b3RhbFBzcyA9IGVudHJpZXNbMV07XG4gICAgICAgICAgdG90YWxQcml2YXRlRGlydHkgPSBlbnRyaWVzWzJdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgdHlwZSA9IGVudHJpZXNbMF07XG4gICAgICAgIGlmICh0eXBlID09PSAnTmF0aXZlJykge1xuICAgICAgICAgIG5hdGl2ZVBzcyA9IGVudHJpZXNbMV07XG4gICAgICAgICAgbmF0aXZlUHJpdmF0ZURpcnR5ID0gZW50cmllc1szXTtcbiAgICAgICAgICBuYXRpdmVIZWFwU2l6ZSA9IGVudHJpZXNbNF07XG4gICAgICAgICAgbmF0aXZlSGVhcEFsbG9jYXRlZFNpemUgPSBlbnRyaWVzWzVdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdEYWx2aWsnKSB7XG4gICAgICAgICAgZGFsdmlrUHNzID0gZW50cmllc1sxXTtcbiAgICAgICAgICBkYWx2aWtQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdFR0wnKSB7XG4gICAgICAgICAgZWdsUHNzID0gZW50cmllc1sxXTtcbiAgICAgICAgICBlZ2xQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdHTCcpIHtcbiAgICAgICAgICBnbFBzcyA9IGVudHJpZXNbMV07XG4gICAgICAgICAgZ2xQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUT1RBTCcpIHtcbiAgICAgICAgICB0b3RhbFBzcyA9IGVudHJpZXNbMV07XG4gICAgICAgICAgdG90YWxQcml2YXRlRGlydHkgPSBlbnRyaWVzWzNdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRvdGFsUHJpdmF0ZURpcnR5ICYmIHRvdGFsUHJpdmF0ZURpcnR5ICE9PSAnbm9kZXgnKSB7XG4gICAgICBsZXQgaGVhZGVycyA9IF8uY2xvbmUoTUVNT1JZX0tFWVMpO1xuICAgICAgbGV0IGRhdGEgPSBbdG90YWxQcml2YXRlRGlydHksIG5hdGl2ZVByaXZhdGVEaXJ0eSwgZGFsdmlrUHJpdmF0ZURpcnR5LCBlZ2xQcml2YXRlRGlydHksIGdsUHJpdmF0ZURpcnR5LCB0b3RhbFBzcywgbmF0aXZlUHNzLCBkYWx2aWtQc3MsIGVnbFBzcywgZ2xQc3MsIG5hdGl2ZUhlYXBBbGxvY2F0ZWRTaXplLCBuYXRpdmVIZWFwU2l6ZV07XG4gICAgICByZXR1cm4gW2hlYWRlcnMsIGRhdGFdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBwYXJzZSBtZW1vcnkgZGF0YTogJyR7ZGF0YX0nYCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmhlbHBlcnMuZ2V0TmV0d29ya1RyYWZmaWNJbmZvID0gYXN5bmMgZnVuY3Rpb24gKGRhdGFSZWFkVGltZW91dCA9IDIpIHtcbiAgcmV0dXJuIGF3YWl0IHJldHJ5SW50ZXJ2YWwoZGF0YVJlYWRUaW1lb3V0LCBSRVRSWV9QQVVTRSwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCByZXR1cm5WYWx1ZSA9IFtdO1xuICAgIGxldCBidWNrZXREdXJhdGlvbiwgYnVja2V0U3RhcnQsIGFjdGl2ZVRpbWUsIHJ4Qnl0ZXMsIHJ4UGFja2V0cywgdHhCeXRlcywgdHhQYWNrZXRzLCBvcGVyYXRpb25zO1xuXG4gICAgbGV0IGNtZCA9IFsnZHVtcHN5cycsICduZXRzdGF0cyddO1xuICAgIGxldCBkYXRhID0gYXdhaXQgdGhpcy5hZGIuc2hlbGwoY21kKTtcbiAgICBpZiAoIWRhdGEpIHRocm93IG5ldyBFcnJvcignTm8gZGF0YSBmcm9tIGR1bXBzeXMnKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG5cbiAgICAvLyBJbiBjYXNlIG9mIG5ldHdvcmsgdHJhZmZpYyBpbmZvcm1hdGlvbiwgaXQgaXMgZGlmZmVyZW50IGZvciB0aGUgcmV0dXJuIGRhdGEgYmV0d2VlbiBlbXVsYXRvciBhbmQgcmVhbCBkZXZpY2UuXG4gICAgLy8gdGhlIHJldHVybiBkYXRhIG9mIGVtdWxhdG9yXG4gICAgLy8gICBYdCBzdGF0czpcbiAgICAvLyAgIFBlbmRpbmcgYnl0ZXM6IDM5MjUwXG4gICAgLy8gICBIaXN0b3J5IHNpbmNlIGJvb3Q6XG4gICAgLy8gICBpZGVudD1bW3R5cGU9V0lGSSwgc3ViVHlwZT1DT01CSU5FRCwgbmV0d29ya0lkPVwiV2lyZWRTU0lEXCJdXSB1aWQ9LTEgc2V0PUFMTCB0YWc9MHgwXG4gICAgLy8gICBOZXR3b3JrU3RhdHNIaXN0b3J5OiBidWNrZXREdXJhdGlvbj0zNjAwMDAwXG4gICAgLy8gICBidWNrZXRTdGFydD0xNDc4MDk4ODAwMDAwIGFjdGl2ZVRpbWU9MzE4MjQgcnhCeXRlcz0yMTUwMiByeFBhY2tldHM9NzggdHhCeXRlcz0xNzc0OCB0eFBhY2tldHM9OTAgb3BlcmF0aW9ucz0wXG4gICAgLy9cbiAgICAvLyA3LjFcbiAgICAvLyAgIFh0IHN0YXRzOlxuICAgIC8vICAgUGVuZGluZyBieXRlczogNDgxNDg3XG4gICAgLy8gICBIaXN0b3J5IHNpbmNlIGJvb3Q6XG4gICAgLy8gICBpZGVudD1be3R5cGU9TU9CSUxFLCBzdWJUeXBlPUNPTUJJTkVELCBzdWJzY3JpYmVySWQ9MzEwMjYwLi4uLCBtZXRlcmVkPXRydWV9XSB1aWQ9LTEgc2V0PUFMTCB0YWc9MHgwXG4gICAgLy8gICAgIE5ldHdvcmtTdGF0c0hpc3Rvcnk6IGJ1Y2tldER1cmF0aW9uPTM2MDBcbiAgICAvLyAgICAgICBzdD0xNDgzOTg0ODAwIHJiPTAgcnA9MCB0Yj0xMjAzMSB0cD0xODQgb3A9MFxuICAgIC8vICAgICAgIHN0PTE0ODM5ODg0MDAgcmI9MCBycD0wIHRiPTM4NDc2IHRwPTU4NyBvcD0wXG4gICAgLy8gICAgICAgc3Q9MTQ4Mzk5OTIwMCByYj0zMTU2MTYgcnA9NDAwIHRiPTk0ODAwIHRwPTM2MiBvcD0wXG4gICAgLy8gICAgICAgc3Q9MTQ4NDAwMjgwMCByYj0xNTgyNiBycD0yMCB0Yj00NzM4IHRwPTE2IG9wPTBcbiAgICAvL1xuICAgIC8vIHRoZSByZXR1cm4gZGF0YSBvZiByZWFsIGRldmljZVxuICAgIC8vICAgWHQgc3RhdHM6XG4gICAgLy8gICBQZW5kaW5nIGJ5dGVzOiAwXG4gICAgLy8gICBIaXN0b3J5IHNpbmNlIGJvb3Q6XG4gICAgLy8gICBpZGVudD1be3R5cGU9TU9CSUxFLCBzdWJUeXBlPUNPTUJJTkVELCBzdWJzY3JpYmVySWQ9NDUwMDUwLi4ufV0gdWlkPS0xIHNldD1BTEwgdGFnPTB4MFxuICAgIC8vICAgTmV0d29ya1N0YXRzSGlzdG9yeTogYnVja2V0RHVyYXRpb249MzYwMFxuICAgIC8vICAgc3Q9MTQ3ODA4ODAwMCByYj0zMjExNTI5NiBycD0zNDI5MSB0Yj0yOTU2ODA1IHRwPTI1NzA1IG9wPTBcbiAgICAvLyAgIHN0PTE0NzgwOTE2MDAgcmI9MjcxNDY4MyBycD0xMTgyMSB0Yj0xNDIwNTY0IHRwPTEyNjUwIG9wPTBcbiAgICAvLyAgIHN0PTE0NzgwOTUyMDAgcmI9MTAwNzkyMTMgcnA9MTk5NjIgdGI9MjQ4NzcwNSB0cD0yMDAxNSBvcD0wXG4gICAgLy8gICBzdD0xNDc4MDk4ODAwIHJiPTQ0NDQ0MzMgcnA9MTAyMjcgdGI9MTQzMDM1NiB0cD0xMDQ5MyBvcD0wXG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBsZXQgZnJvbVh0c3RhdHMgPSBkYXRhLmluZGV4T2YoXCJYdCBzdGF0czpcIik7XG5cbiAgICBsZXQgc3RhcnQgPSBkYXRhLmluZGV4T2YoXCJQZW5kaW5nIGJ5dGVzOlwiLCBmcm9tWHRzdGF0cyk7XG4gICAgbGV0IGRlbGltaXRlciA9IGRhdGEuaW5kZXhPZihcIjpcIiwgc3RhcnQgKyAxKTtcbiAgICBsZXQgZW5kID0gZGF0YS5pbmRleE9mKFwiXFxuXCIsIGRlbGltaXRlciArIDEpO1xuICAgIGxldCBwZW5kaW5nQnl0ZXMgPSBkYXRhLnN1YnN0cmluZyhkZWxpbWl0ZXIgKyAxLCBlbmQpLnRyaW0oKTtcblxuICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKFwiYnVja2V0RHVyYXRpb25cIiwgZW5kICsgMSk7XG4gICAgICBkZWxpbWl0ZXIgPSBkYXRhLmluZGV4T2YoXCI9XCIsIHN0YXJ0ICsgMSk7XG4gICAgICBlbmQgPSBkYXRhLmluZGV4T2YoXCJcXG5cIiwgZGVsaW1pdGVyICsgMSk7XG4gICAgICBidWNrZXREdXJhdGlvbiA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgIH1cblxuICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICBkYXRhID0gZGF0YS5zdWJzdHJpbmcoZW5kICsgMSwgZGF0YS5sZW5ndGgpO1xuICAgICAgbGV0IGFycmF5TGlzdCA9IGRhdGEuc3BsaXQoXCJcXG5cIik7XG5cbiAgICAgIGlmIChhcnJheUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICBzdGFydCA9IC0xO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgTkVUV09SS19LRVlTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgc3RhcnQgPSBhcnJheUxpc3RbMF0uaW5kZXhPZihORVRXT1JLX0tFWVNbal1bMF0pO1xuXG4gICAgICAgICAgaWYgKHN0YXJ0ID49IDApIHtcbiAgICAgICAgICAgIGluZGV4ID0gajtcbiAgICAgICAgICAgIHJldHVyblZhbHVlWzBdID0gW107XG5cbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgTkVUV09SS19LRVlTW2pdLmxlbmd0aDsgKytrKSB7XG4gICAgICAgICAgICAgIHJldHVyblZhbHVlWzBdW2tdID0gTkVUV09SS19LRVlTW2pdW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJldHVybkluZGV4ID0gMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBkYXRhID0gYXJyYXlMaXN0W2ldO1xuICAgICAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKE5FVFdPUktfS0VZU1tpbmRleF1bMF0pO1xuXG4gICAgICAgICAgaWYgKHN0YXJ0ID49IDApIHtcbiAgICAgICAgICAgIGRlbGltaXRlciA9IGRhdGEuaW5kZXhPZihcIj1cIiwgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgIGVuZCA9IGRhdGEuaW5kZXhPZihcIiBcIiwgZGVsaW1pdGVyICsgMSk7XG4gICAgICAgICAgICBidWNrZXRTdGFydCA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAoZW5kID4gZGVsaW1pdGVyKSB7XG4gICAgICAgICAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKE5FVFdPUktfS0VZU1tpbmRleF1bMV0sIGVuZCArIDEpO1xuICAgICAgICAgICAgICBpZiAoc3RhcnQgPj0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlciA9IGRhdGEuaW5kZXhPZihcIj1cIiwgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICBlbmQgPSBkYXRhLmluZGV4T2YoXCIgXCIsIGRlbGltaXRlciArIDEpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZVRpbWUgPSBkYXRhLnN1YnN0cmluZyhkZWxpbWl0ZXIgKyAxLCBlbmQpLnRyaW0oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZW5kID4gZGVsaW1pdGVyKSB7XG4gICAgICAgICAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKE5FVFdPUktfS0VZU1tpbmRleF1bMl0sIGVuZCArIDEpO1xuICAgICAgICAgICAgICBpZiAoc3RhcnQgPj0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlciA9IGRhdGEuaW5kZXhPZihcIj1cIiwgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICBlbmQgPSBkYXRhLmluZGV4T2YoXCIgXCIsIGRlbGltaXRlciArIDEpO1xuICAgICAgICAgICAgICAgIHJ4Qnl0ZXMgPSBkYXRhLnN1YnN0cmluZyhkZWxpbWl0ZXIgKyAxLCBlbmQpLnRyaW0oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZW5kID4gZGVsaW1pdGVyKSB7XG4gICAgICAgICAgICAgIHN0YXJ0ID0gZGF0YS5pbmRleE9mKE5FVFdPUktfS0VZU1tpbmRleF1bM10sIGVuZCArIDEpO1xuICAgICAgICAgICAgICBpZiAoc3RhcnQgPj0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlciA9IGRhdGEuaW5kZXhPZihcIj1cIiwgc3RhcnQgKyAxKTtcbiAgICAgICAgICAgICAgICBlbmQgPSBkYXRhLmluZGV4T2YoXCIgXCIsIGRlbGltaXRlciArIDEpO1xuICAgICAgICAgICAgICAgIHJ4UGFja2V0cyA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgc3RhcnQgPSBkYXRhLmluZGV4T2YoTkVUV09SS19LRVlTW2luZGV4XVs0XSwgZW5kICsgMSk7XG4gICAgICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gZGF0YS5pbmRleE9mKFwiPVwiLCBzdGFydCArIDEpO1xuICAgICAgICAgICAgICAgIGVuZCA9IGRhdGEuaW5kZXhPZihcIiBcIiwgZGVsaW1pdGVyICsgMSk7XG4gICAgICAgICAgICAgICAgdHhCeXRlcyA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmQgPiBkZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgICAgc3RhcnQgPSBkYXRhLmluZGV4T2YoTkVUV09SS19LRVlTW2luZGV4XVs1XSwgZW5kICsgMSk7XG4gICAgICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gZGF0YS5pbmRleE9mKFwiPVwiLCBzdGFydCArIDEpO1xuICAgICAgICAgICAgICAgIGVuZCA9IGRhdGEuaW5kZXhPZihcIiBcIiwgZGVsaW1pdGVyICsgMSk7XG4gICAgICAgICAgICAgICAgdHhQYWNrZXRzID0gZGF0YS5zdWJzdHJpbmcoZGVsaW1pdGVyICsgMSwgZW5kKS50cmltKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZCA+IGRlbGltaXRlcikge1xuICAgICAgICAgICAgICBzdGFydCA9IGRhdGEuaW5kZXhPZihORVRXT1JLX0tFWVNbaW5kZXhdWzZdLCBlbmQgKyAxKTtcbiAgICAgICAgICAgICAgaWYgKHN0YXJ0ID49IDApIHtcbiAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSBkYXRhLmluZGV4T2YoXCI9XCIsIHN0YXJ0ICsgMSk7XG4gICAgICAgICAgICAgICAgZW5kID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9ucyA9IGRhdGEuc3Vic3RyaW5nKGRlbGltaXRlciArIDEsIGVuZCkudHJpbSgpO1xuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblZhbHVlW3JldHVybkluZGV4KytdID0gW2J1Y2tldFN0YXJ0LCBhY3RpdmVUaW1lLCByeEJ5dGVzLCByeFBhY2tldHMsIHR4Qnl0ZXMsIHR4UGFja2V0cywgb3BlcmF0aW9ucywgYnVja2V0RHVyYXRpb25dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghXy5pc0VxdWFsKHBlbmRpbmdCeXRlcywgXCJcIikgJiYgIV8uaXNVbmRlZmluZWQocGVuZGluZ0J5dGVzKSAmJiAhXy5pc0VxdWFsKHBlbmRpbmdCeXRlcywgXCJub2RleFwiKSkge1xuICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBwYXJzZSBuZXR3b3JrIHRyYWZmaWMgZGF0YTogJyR7ZGF0YX0nYCk7XG4gICAgfVxuICB9KTtcbn07XG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucywgY29tbWFuZHMsIGhlbHBlcnMpO1xuZXhwb3J0IHtcbiAgY29tbWFuZHMsIGhlbHBlcnMsIFNVUFBPUlRFRF9QRVJGT1JNQU5DRV9EQVRBX1RZUEVTLCBDUFVfS0VZUywgTUVNT1JZX0tFWVMsXG4gIEJBVFRFUllfS0VZUywgTkVUV09SS19LRVlTLFxufTtcbmV4cG9ydCBkZWZhdWx0IGV4dGVuc2lvbnM7XG4iXSwiZmlsZSI6ImxpYi9jb21tYW5kcy9wZXJmb3JtYW5jZS5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
