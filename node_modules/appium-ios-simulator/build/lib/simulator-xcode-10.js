"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _simulatorXcode = _interopRequireDefault(require("./simulator-xcode-9.3"));

var _nodeSimctl = require("node-simctl");

var _appiumSupport = require("appium-support");

class SimulatorXcode10 extends _simulatorXcode.default {
  constructor(udid, xcodeVersion) {
    super(udid, xcodeVersion);
  }

  isAppInstalled(bundleId) {
    var _this = this;

    return (0, _asyncToGenerator2.default)(function* () {
      try {
        const appContainer = yield (0, _nodeSimctl.getAppContainer)(_this.udid, bundleId, false);

        if (!appContainer.endsWith('.app')) {
          return false;
        }

        return yield _appiumSupport.fs.exists(appContainer);
      } catch (err) {
        try {
          const info = yield (0, _nodeSimctl.appInfo)(_this.udid, bundleId);
          return info.includes('ApplicationType');
        } catch (ign) {}
      }

      return false;
    })();
  }

}

var _default = SimulatorXcode10;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zaW11bGF0b3IteGNvZGUtMTAuanMiXSwibmFtZXMiOlsiU2ltdWxhdG9yWGNvZGUxMCIsIlNpbXVsYXRvclhjb2RlOTMiLCJjb25zdHJ1Y3RvciIsInVkaWQiLCJ4Y29kZVZlcnNpb24iLCJpc0FwcEluc3RhbGxlZCIsImJ1bmRsZUlkIiwiYXBwQ29udGFpbmVyIiwiZW5kc1dpdGgiLCJmcyIsImV4aXN0cyIsImVyciIsImluZm8iLCJpbmNsdWRlcyIsImlnbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFHQSxNQUFNQSxnQkFBTixTQUErQkMsdUJBQS9CLENBQWdEO0FBQzlDQyxFQUFBQSxXQUFXLENBQUVDLElBQUYsRUFBUUMsWUFBUixFQUFzQjtBQUMvQixVQUFNRCxJQUFOLEVBQVlDLFlBQVo7QUFDRDs7QUFTS0MsRUFBQUEsY0FBTixDQUFzQkMsUUFBdEIsRUFBZ0M7QUFBQTs7QUFBQTtBQUM5QixVQUFJO0FBQ0YsY0FBTUMsWUFBWSxTQUFTLGlDQUFnQixLQUFJLENBQUNKLElBQXJCLEVBQTJCRyxRQUEzQixFQUFxQyxLQUFyQyxDQUEzQjs7QUFDQSxZQUFJLENBQUNDLFlBQVksQ0FBQ0MsUUFBYixDQUFzQixNQUF0QixDQUFMLEVBQW9DO0FBQ2xDLGlCQUFPLEtBQVA7QUFDRDs7QUFDRCxxQkFBYUMsa0JBQUdDLE1BQUgsQ0FBVUgsWUFBVixDQUFiO0FBQ0QsT0FORCxDQU1FLE9BQU9JLEdBQVAsRUFBWTtBQUlaLFlBQUk7QUFDRixnQkFBTUMsSUFBSSxTQUFTLHlCQUFRLEtBQUksQ0FBQ1QsSUFBYixFQUFtQkcsUUFBbkIsQ0FBbkI7QUFDQSxpQkFBT00sSUFBSSxDQUFDQyxRQUFMLENBQWMsaUJBQWQsQ0FBUDtBQUNELFNBSEQsQ0FHRSxPQUFPQyxHQUFQLEVBQVksQ0FBRTtBQUNqQjs7QUFDRCxhQUFPLEtBQVA7QUFoQjhCO0FBaUIvQjs7QUE3QjZDOztlQWdDakNkLGdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNpbXVsYXRvclhjb2RlOTMgZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtOS4zJztcbmltcG9ydCB7IGdldEFwcENvbnRhaW5lciwgYXBwSW5mbyB9IGZyb20gJ25vZGUtc2ltY3RsJztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuXG5cbmNsYXNzIFNpbXVsYXRvclhjb2RlMTAgZXh0ZW5kcyBTaW11bGF0b3JYY29kZTkzIHtcbiAgY29uc3RydWN0b3IgKHVkaWQsIHhjb2RlVmVyc2lvbikge1xuICAgIHN1cGVyKHVkaWQsIHhjb2RlVmVyc2lvbik7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZ5IHdoZXRoZXIgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gaXMgaW5zdGFsbGVkIG9uIFNpbXVsYXRvci5cbiAgICogQG92ZXJyaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBidW5kbGVJZCAtIFRoZSBidW5kbGUgaWQgb2YgdGhlIGFwcGxpY2F0aW9uIHRvIGJlIGNoZWNrZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdpdmVuIGFwcGxpY2F0aW9uIGlzIGluc3RhbGxlZC5cbiAgICovXG4gIGFzeW5jIGlzQXBwSW5zdGFsbGVkIChidW5kbGVJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcHBDb250YWluZXIgPSBhd2FpdCBnZXRBcHBDb250YWluZXIodGhpcy51ZGlkLCBidW5kbGVJZCwgZmFsc2UpO1xuICAgICAgaWYgKCFhcHBDb250YWluZXIuZW5kc1dpdGgoJy5hcHAnKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgZnMuZXhpc3RzKGFwcENvbnRhaW5lcik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBnZXRfYXBwX2NvbnRhaW5lciBzdWJjb21tYW5kIGZhaWxzIGZvciBzeXN0ZW0gYXBwbGljYXRpb25zLFxuICAgICAgLy8gc28gd2UgdHJ5IHRoZSBoaWRkZW4gYXBwaW5mbyBzdWJjb21tYW5kLCB3aGljaCBwcmludHMgY29ycmVjdCBpbmZvIGZvclxuICAgICAgLy8gc3lzdGVtL2hpZGRlbiBhcHBzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgYXBwSW5mbyh0aGlzLnVkaWQsIGJ1bmRsZUlkKTtcbiAgICAgICAgcmV0dXJuIGluZm8uaW5jbHVkZXMoJ0FwcGxpY2F0aW9uVHlwZScpO1xuICAgICAgfSBjYXRjaCAoaWduKSB7fVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2ltdWxhdG9yWGNvZGUxMDtcbiJdLCJmaWxlIjoibGliL3NpbXVsYXRvci14Y29kZS0xMC5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiJ9
