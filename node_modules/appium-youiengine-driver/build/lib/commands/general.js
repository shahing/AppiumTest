"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _utils = require("../utils");

let commands = {};

commands.getPageSource = async function () {
  let source;
  let commandObject = {
    name: 'GetSRC'
  };
  let commandJSON = JSON.stringify(commandObject);
  source = await this.executeSocketCommand(commandJSON);

  if (source) {
    return source.toString();
  } else {
    throw new Error("Bad response from getTreeForXML");
  }
};

commands.getWindowSize = async function () {
  let commandObject = {
    name: `getWindowSize`
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error("Bad response from window_size");
  }

  if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_NO_SUCH_WINDOW) {
    throw new Error("Could not find the requested surface");
  } else if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_UNKNOWN_COMMAND) {
    throw new Error("The requested command is not supported in the version of You.i Engine currently running.");
  }

  return result.value;
};

var _default = commands;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9nZW5lcmFsLmpzIl0sIm5hbWVzIjpbImNvbW1hbmRzIiwiZ2V0UGFnZVNvdXJjZSIsInNvdXJjZSIsImNvbW1hbmRPYmplY3QiLCJuYW1lIiwiY29tbWFuZEpTT04iLCJKU09OIiwic3RyaW5naWZ5IiwiZXhlY3V0ZVNvY2tldENvbW1hbmQiLCJ0b1N0cmluZyIsIkVycm9yIiwiZ2V0V2luZG93U2l6ZSIsImRhdGEiLCJyZXN1bHQiLCJwYXJzZSIsImUiLCJzdGF0dXMiLCJ5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzIiwiV0VCRFJJVkVSX05PX1NVQ0hfV0lORE9XIiwiV0VCRFJJVkVSX1VOS05PV05fQ09NTUFORCIsInZhbHVlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFFQSxJQUFJQSxRQUFRLEdBQUcsRUFBZjs7QUFFQUEsUUFBUSxDQUFDQyxhQUFULEdBQXlCLGtCQUFrQjtBQUV6QyxNQUFJQyxNQUFKO0FBRUEsTUFBSUMsYUFBYSxHQUFHO0FBQ2xCQyxJQUFBQSxJQUFJLEVBQUU7QUFEWSxHQUFwQjtBQUdBLE1BQUlDLFdBQVcsR0FBR0MsSUFBSSxDQUFDQyxTQUFMLENBQWVKLGFBQWYsQ0FBbEI7QUFFQUQsRUFBQUEsTUFBTSxHQUFHLE1BQU0sS0FBS00sb0JBQUwsQ0FBMEJILFdBQTFCLENBQWY7O0FBRUEsTUFBSUgsTUFBSixFQUFZO0FBQ1YsV0FBT0EsTUFBTSxDQUFDTyxRQUFQLEVBQVA7QUFDRCxHQUZELE1BRU87QUFHTCxVQUFNLElBQUlDLEtBQUosQ0FBVSxpQ0FBVixDQUFOO0FBQ0Q7QUFDRixDQWxCRDs7QUFvQkFWLFFBQVEsQ0FBQ1csYUFBVCxHQUF5QixrQkFBa0I7QUFFekMsTUFBSVIsYUFBYSxHQUFHO0FBQ2xCQyxJQUFBQSxJQUFJLEVBQUc7QUFEVyxHQUFwQjtBQUdBLE1BQUlDLFdBQVcsR0FBR0MsSUFBSSxDQUFDQyxTQUFMLENBQWVKLGFBQWYsQ0FBbEI7QUFFQSxNQUFJUyxJQUFJLEdBQUcsTUFBTSxLQUFLSixvQkFBTCxDQUEwQkgsV0FBMUIsQ0FBakI7QUFFQSxNQUFJUSxNQUFKOztBQUNBLE1BQUk7QUFDRkEsSUFBQUEsTUFBTSxHQUFHUCxJQUFJLENBQUNRLEtBQUwsQ0FBV0YsSUFBWCxDQUFUO0FBQ0QsR0FGRCxDQUVFLE9BQU9HLENBQVAsRUFBVTtBQUNWLFVBQU0sSUFBSUwsS0FBSixDQUFVLCtCQUFWLENBQU47QUFDRDs7QUFHRCxNQUFJRyxNQUFNLENBQUNHLE1BQVAsS0FBa0JDLG9DQUE2QkMsd0JBQW5ELEVBQTZFO0FBQzNFLFVBQU0sSUFBSVIsS0FBSixDQUFVLHNDQUFWLENBQU47QUFDRCxHQUZELE1BRU8sSUFBSUcsTUFBTSxDQUFDRyxNQUFQLEtBQWtCQyxvQ0FBNkJFLHlCQUFuRCxFQUE4RTtBQUNuRixVQUFNLElBQUlULEtBQUosQ0FBVSwwRkFBVixDQUFOO0FBQ0Q7O0FBRUQsU0FBT0csTUFBTSxDQUFDTyxLQUFkO0FBQ0QsQ0F4QkQ7O2VBMEJlcEIsUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHlvdWlFbmdpbmVEcml2ZXJSZXR1cm5WYWx1ZXMgfSBmcm9tICcuLi91dGlscyc7XG5cbmxldCBjb21tYW5kcyA9IHt9O1xuXG5jb21tYW5kcy5nZXRQYWdlU291cmNlID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuXG4gIGxldCBzb3VyY2U7XG5cbiAgbGV0IGNvbW1hbmRPYmplY3QgPSB7XG4gICAgbmFtZTogJ0dldFNSQydcbiAgfTtcbiAgbGV0IGNvbW1hbmRKU09OID0gSlNPTi5zdHJpbmdpZnkoY29tbWFuZE9iamVjdCk7XG5cbiAgc291cmNlID0gYXdhaXQgdGhpcy5leGVjdXRlU29ja2V0Q29tbWFuZChjb21tYW5kSlNPTik7XG5cbiAgaWYgKHNvdXJjZSkge1xuICAgIHJldHVybiBzb3VyY2UudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4gYnV0IHdlJ3ZlIHJlY2VpdmVkIGJ1ZyByZXBvcnRzOyB0aGlzIHdpbGwgaGVscCB1cyB0cmFjayBkb3duXG4gICAgLy8gd2hhdCdzIHdyb25nIGluIGdldFRyZWVGb3JYTUxcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgcmVzcG9uc2UgZnJvbSBnZXRUcmVlRm9yWE1MXCIpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRXaW5kb3dTaXplID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuXG4gIGxldCBjb21tYW5kT2JqZWN0ID0ge1xuICAgIG5hbWU6IGBnZXRXaW5kb3dTaXplYFxuICB9O1xuICBsZXQgY29tbWFuZEpTT04gPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcblxuICBsZXQgZGF0YSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVNvY2tldENvbW1hbmQoY29tbWFuZEpTT04pO1xuXG4gIGxldCByZXN1bHQ7XG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIHdpbmRvd19zaXplXCIpO1xuICB9XG5cbiAgLy8gZ2V0IHN0YXR1cyByZXR1cm5lZCBhbmQgaGFuZGxlIGVycm9ycyByZXR1cm5lZCBmcm9tIHNlcnZlclxuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0geW91aUVuZ2luZURyaXZlclJldHVyblZhbHVlcy5XRUJEUklWRVJfTk9fU1VDSF9XSU5ET1cpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCB0aGUgcmVxdWVzdGVkIHN1cmZhY2VcIik7XG4gIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0geW91aUVuZ2luZURyaXZlclJldHVyblZhbHVlcy5XRUJEUklWRVJfVU5LTk9XTl9DT01NQU5EKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3RlZCBjb21tYW5kIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIHZlcnNpb24gb2YgWW91LmkgRW5naW5lIGN1cnJlbnRseSBydW5uaW5nLlwiKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQudmFsdWU7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb21tYW5kcztcbiJdLCJmaWxlIjoibGliL2NvbW1hbmRzL2dlbmVyYWwuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
